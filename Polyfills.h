// This file is auto-generated by generate_polyfill_header.sh. DO NOT EDIT.
#import <Foundation/Foundation.h>

// Base polyfill scripts (for all versions or as fallback)
static NSString *scripts = @"\
\"use strict\";console.log(\"Polyfills scripts started.\");if(!Element.prototype.checkVisibility){Element.prototype.checkVisibility=function checkVisibility(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var checkOpacity=true;if(options.opacityProperty!=undefined||options.checkOpacity!=undefined){checkOpacity=!!(options.opacityProperty||options.checkOpacity)}var checkVisibility=true;if(options.visibilityProperty!=undefined||options.checkVisibilityCSS!=undefined){checkVisibility=!!(options.visibilityProperty||options.checkVisibilityCSS)}var checkContentVisibility=true;if(options.contentVisibilityAuto!=undefined){checkContentVisibility=!!options.contentVisibilityAuto}var computedStyle=getComputedStyle(this);if(computedStyle.display===\"none\"||checkOpacity&&computedStyle.opacity===\"0\"||checkVisibility&&computedStyle.visibility===\"hidden\"||checkContentVisibility&&computedStyle.contentVisibility===\"hidden\"){return false}try{var rec=this.getBoundingClientRect();if(rec.width===0||rec.height===0){return false}}catch(_unused){return false}return true}}";

// Polyfill scripts for iOS < 10.1
static NSString *scripts_before_10_1 = @"\
\"use strict\";(function(root,factory){factory(root)})(typeof global!=\"undefined\"?global:void 0,function(root){if(root.CSS&&root.CSS.escape){return root.CSS.escape}var cssEscape=function cssEscape(value){if(arguments.length==0){throw new TypeError(\"`CSS.escape` requires an argument.\")}var string=String(value);var length=string.length;var index=-1;var codeUnit;var result=\"\";var firstCodeUnit=string.charCodeAt(0);if(length==1&&firstCodeUnit==45){return\"\\\\\"+string}while(++index<length){codeUnit=string.charCodeAt(index);if(codeUnit==0){result+=\"ï¿½\";continue}if(codeUnit>=1&&codeUnit<=31||codeUnit==127||index==0&&codeUnit>=48&&codeUnit<=57||index==1&&codeUnit>=48&&codeUnit<=57&&firstCodeUnit==45){result+=\"\\\\\"+codeUnit.toString(16)+\" \";continue}if(codeUnit>=128||codeUnit==45||codeUnit==95||codeUnit>=48&&codeUnit<=57||codeUnit>=65&&codeUnit<=90||codeUnit>=97&&codeUnit<=122){result+=string.charAt(index);continue}result+=\"\\\\\"+string.charAt(index)}return result};if(!root.CSS){root.CSS={}}root.CSS.escape=cssEscape;return cssEscape});Object.entries=Object.entries?Object.entries:function(obj){var allowedTypes=[\"[object String]\",\"[object Object]\",\"[object Array]\",\"[object Function]\"];var objType=Object.prototype.toString.call(obj);if(obj===null||typeof obj===\"undefined\"){throw new TypeError(\"Cannot convert undefined or null to object\")}else if(!~allowedTypes.indexOf(objType)){return[]}else{if(Object.keys){return Object.keys(obj).map(function(key){return[key,obj[key]]})}var result=[];for(var prop in obj){if(obj.hasOwnProperty(prop)){result.push([prop,obj[prop]])}}return objType===\"[object Array]\"?result:result.sort(function(a,b){return a[1]-b[1]})}};Object.values=Object.values?Object.values:function(obj){var allowedTypes=[\"[object String]\",\"[object Object]\",\"[object Array]\",\"[object Function]\"];var objType=Object.prototype.toString.call(obj);if(obj===null||typeof obj===\"undefined\"){throw new TypeError(\"Cannot convert undefined or null to object\")}else if(!~allowedTypes.indexOf(objType)){return[]}else{if(Object.keys){return Object.keys(obj).map(function(key){return obj[key]})}var result=[];for(var prop in obj){if(obj.hasOwnProperty(prop)){result.push(obj[prop])}}return result}};";

// Polyfill scripts for iOS < 16.4
static NSString *scripts_before_16_4 = @"\
\"use strict\";function _typeof(o){\"@babel/helpers - typeof\";return _typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&\"function\"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?\"symbol\":typeof o},_typeof(o)}function _callSuper(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e))}function _possibleConstructorReturn(t,e){if(e&&(\"object\"==_typeof(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return _assertThisInitialized(t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _inherits(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function _toPropertyKey(t){var i=_toPrimitive(t,\"string\");return\"symbol\"==_typeof(i)?i:i+\"\"}function _toPrimitive(t,r){if(\"object\"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||\"default\");if(\"object\"!=_typeof(i))return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===r?String:Number)(t)}function _regenerator(){var e,t,r=\"function\"==typeof Symbol?Symbol:{},n=r.iterator||\"@@iterator\",o=r.toStringTag||\"@@toStringTag\";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return _regeneratorDefine2(u,\"_invoke\",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError(\"Generator is already running\");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o=\"next\"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError(\"iterator result is not an object\");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i[\"return\"])&&t.call(i),c<2&&(u=TypeError(\"The iterator does not provide a '\"+o+\"' method\"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,o,\"GeneratorFunction\")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(u,\"constructor\",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,\"constructor\",GeneratorFunction),GeneratorFunction.displayName=\"GeneratorFunction\",_regeneratorDefine2(GeneratorFunctionPrototype,o,\"GeneratorFunction\"),_regeneratorDefine2(u),_regeneratorDefine2(u,o,\"Generator\"),_regeneratorDefine2(u,n,function(){return this}),_regeneratorDefine2(u,\"toString\",function(){return\"[object Generator]\"}),(_regenerator=function _regenerator(){return{w:i,m:f}})()}function _regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},\"\",{})}catch(e){i=0}_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){if(r)i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n;else{var o=function o(r,n){_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})};o(\"next\",0),o(\"throw\",1),o(\"return\",2)}},_regeneratorDefine2(e,r,n,t)}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,\"next\",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,\"throw\",n)}_next(void 0)})}}function _asyncIterator(r){var n,t,o,e=2;for(\"undefined\"!=typeof Symbol&&(t=Symbol.asyncIterator,o=Symbol.iterator);e--;){if(t&&null!=(n=r[t]))return n.call(r);if(o&&null!=(n=r[o]))return new AsyncFromSyncIterator(n.call(r));t=\"@@asyncIterator\",o=\"@@iterator\"}throw new TypeError(\"Object is not async iterable\")}function AsyncFromSyncIterator(r){function AsyncFromSyncIteratorContinuation(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+\" is not an object.\"));var n=r.done;return Promise.resolve(r.value).then(function(r){return{value:r,done:n}})}return AsyncFromSyncIterator=function AsyncFromSyncIterator(r){this.s=r,this.n=r.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function next(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments))},return:function _return(r){var n=this.s[\"return\"];return void 0===n?Promise.resolve({value:r,done:!0}):AsyncFromSyncIteratorContinuation(n.apply(this.s,arguments))},throw:function _throw(r){var n=this.s[\"return\"];return void 0===n?Promise.reject(r):AsyncFromSyncIteratorContinuation(n.apply(this.s,arguments))}},new AsyncFromSyncIterator(r)}(function(){if(typeof Array.fromAsync===\"function\")return;var MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER;var iteratorSymbol=Symbol.iterator;var asyncIteratorSymbol=Symbol.asyncIterator;var IntrinsicArray=Array;var tooLongErrorMessage=\"Input is too long and exceeded Number.MAX_SAFE_INTEGER times.\";function isConstructor(obj){if(obj!=null){var prox=new Proxy(obj,{construct:function construct(){return prox}});try{new prox;return true}catch(_unused){return false}}return false}Array.fromAsync=function(){var _fromAsync=_asyncToGenerator(_regenerator().m(function _callee(items,mapfn,thisArg){var itemsAreIterable,C,_result,_i,_iteratorAbruptCompletion,_didIteratorError,_iteratorError,_iterator,_step,v,_ref,length,len,result,i,_v,_t,_t2,_t3;return _regenerator().w(function(_context){while(1)switch(_context.n){case 0:itemsAreIterable=items!=null&&(asyncIteratorSymbol in items||iteratorSymbol in items);C=isConstructor(this)?this:IntrinsicArray;if(!itemsAreIterable){_context.n=17;break}_result=new C;_i=0;_iteratorAbruptCompletion=false;_didIteratorError=false;_context.p=1;_iterator=_asyncIterator(items);case 2:_context.n=3;return _iterator.next();case 3:if(!(_iteratorAbruptCompletion=!(_step=_context.v).done)){_context.n=9;break}v=_step.value;if(!(_i>MAX_SAFE_INTEGER)){_context.n=4;break}throw TypeError(tooLongErrorMessage);case 4:if(!mapfn){_context.n=6;break}_context.n=5;return mapfn.call(thisArg,v,_i);case 5:_t=_context.v;_context.n=7;break;case 6:_t=v;case 7:_result[_i]=_t;_i++;case 8:_iteratorAbruptCompletion=false;_context.n=2;break;case 9:_context.n=11;break;case 10:_context.p=10;_t2=_context.v;_didIteratorError=true;_iteratorError=_t2;case 11:_context.p=11;_context.p=12;if(!(_iteratorAbruptCompletion&&_iterator[\"return\"]!=null)){_context.n=13;break}_context.n=13;return _iterator[\"return\"]();case 13:_context.p=13;if(!_didIteratorError){_context.n=14;break}throw _iteratorError;case 14:return _context.f(13);case 15:return _context.f(11);case 16:_result.length=_i;return _context.a(2,_result);case 17:_ref=items!==null&&items!==void 0?items:{},length=_ref.length;len=length>>>0;result=new C(len);i=0;case 18:if(!(i<len)){_context.n=24;break}if(!(i>MAX_SAFE_INTEGER)){_context.n=19;break}throw TypeError(tooLongErrorMessage);case 19:_context.n=20;return items[i];case 20:_v=_context.v;if(!mapfn){_context.n=22;break}_context.n=21;return mapfn.call(thisArg,_v,i);case 21:_t3=_context.v;_context.n=23;break;case 22:_t3=_v;case 23:result[i]=_t3;i++;_context.n=18;break;case 24:result.length=i;return _context.a(2,result)}},_callee,this,[[12,,13,15],[1,10,11,16]])}));function fromAsync(_x,_x2,_x3){return _fromAsync.apply(this,arguments)}return fromAsync}()})();!function(t){\"function\"==typeof define&&define.amd?define(t):t()}(function(){var t={},n=Uint8Array,r=Uint16Array,e=Int32Array,i=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function s(t,n){for(var i=new r(31),a=0;a<31;++a)i[a]=n+=1<<t[a-1];var o=new e(i[30]);for(a=1;a<30;++a)for(var s=i[a];s<i[a+1];++s)o[s]=s-i[a]<<5|a;return{b:i,r:o}},f=s(i,2),h=f.b,u=f.r;h[28]=258,u[258]=28;for(var l=s(a,0),c=l.b,v=l.r,p=new r(32768),d=0;d<32768;++d){var g=(43690&d)>>1|(21845&d)<<1;p[d]=((65280&(g=(61680&(g=(52428&g)>>2|(13107&g)<<2))>>4|(3855&g)<<4))>>8|(255&g)<<8)>>1}var y=function y(t,n,e){for(var i=t.length,a=0,o=new r(n);a<i;++a)t[a]&&++o[t[a]-1];var s,f=new r(n);for(a=1;a<n;++a)f[a]=f[a-1]+o[a-1]<<1;if(e){s=new r(1<<n);var h=15-n;for(a=0;a<i;++a)if(t[a])for(var u=a<<4|t[a],l=n-t[a],c=f[t[a]-1]++<<l,v=c|(1<<l)-1;c<=v;++c)s[p[c]>>h]=u}else for(s=new r(i),a=0;a<i;++a)t[a]&&(s[a]=p[f[t[a]-1]++]>>15-t[a]);return s},w=new n(288);for(d=0;d<144;++d)w[d]=8;for(d=144;d<256;++d)w[d]=9;for(d=256;d<280;++d)w[d]=7;for(d=280;d<288;++d)w[d]=8;var b=new n(32);for(d=0;d<32;++d)b[d]=5;var m=y(w,9,0),z=y(w,9,1),M=y(b,5,0),S=y(b,5,1),k=function k(t){for(var n=t[0],r=1;r<t.length;++r)t[r]>n&&(n=t[r]);return n},x=function x(t,n,r){var e=n/8|0;return(t[e]|t[e+1]<<8)>>(7&n)&r},A=function A(t,n){var r=n/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(7&n)},T=function T(t){return(t+7)/8|0},q=function q(t,r,e){return(null==r||r<0)&&(r=0),(null==e||e>t.length)&&(e=t.length),new n(t.subarray(r,e))},E=[\"unexpected EOF\",\"invalid block type\",\"invalid length/literal\",\"invalid distance\",\"stream finished\",\"no stream handler\",,\"no callback\",\"invalid UTF-8 data\",\"extra field too long\",\"date not in range 1980-2099\",\"filename too long\",\"stream finishing\",\"invalid zip data\"],_U=function U(t,n,r){var e=new Error(n||E[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,_U),!r)throw e;return e},O=function O(t,r,e,s){var f=t.length,u=s?s.length:0;if(!f||r.f&&!r.l)return e||new n(0);var l=!e,v=l||2!=r.i,p=r.i;l&&(e=new n(3*f));var d=function d(t){var r=e.length;if(t>r){var i=new n(Math.max(2*r,t));i.set(e),e=i}},g=r.f||0,w=r.p||0,b=r.b||0,m=r.l,M=r.d,E=r.m,O=r.n,D=8*f;do{if(!m){g=x(t,w,1);var $=x(t,w+1,3);if(w+=3,!$){var L=t[(H=T(w)+4)-4]|t[H-3]<<8,B=H+L;if(B>f){p&&_U(0);break}v&&d(b+L),e.set(t.subarray(H,B),b),r.b=b+=L,r.p=w=8*B,r.f=g;continue}if(1==$)m=z,M=S,E=9,O=5;else if(2==$){var C=x(t,w,31)+257,F=x(t,w+10,15)+4,I=C+x(t,w+5,31)+1;w+=14;for(var W=new n(I),j=new n(19),P=0;P<F;++P)j[o[P]]=x(t,w+3*P,7);w+=3*F;var R=k(j),V=(1<<R)-1,G=y(j,R,1);for(P=0;P<I;){var H,J=G[x(t,w,V)];if(w+=15&J,(H=J>>4)<16)W[P++]=H;else{var K=0,N=0;for(16==H?(N=3+x(t,w,3),w+=2,K=W[P-1]):17==H?(N=3+x(t,w,7),w+=3):18==H&&(N=11+x(t,w,127),w+=7);N--;)W[P++]=K}}var Q=W.subarray(0,C),X=W.subarray(C);E=k(Q),O=k(X),m=y(Q,E,1),M=y(X,O,1)}else _U(1);if(w>D){p&&_U(0);break}}v&&d(b+131072);for(var Y=(1<<E)-1,Z=(1<<O)-1,_=w;;_=w){var tt=(K=m[A(t,w)&Y])>>4;if((w+=15&K)>D){p&&_U(0);break}if(K||_U(2),tt<256)e[b++]=tt;else{if(256==tt){_=w,m=null;break}var nt=tt-254;tt>264&&(nt=x(t,w,(1<<(it=i[P=tt-257]))-1)+h[P],w+=it);var rt=M[A(t,w)&Z],et=rt>>4;if(rt||_U(3),w+=15&rt,X=c[et],et>3){var it=a[et];X+=A(t,w)&(1<<it)-1,w+=it}if(w>D){p&&_U(0);break}v&&d(b+131072);var at=b+nt;if(b<X){var ot=u-X,st=Math.min(X,at);for(ot+b<0&&_U(3);b<st;++b)e[b]=s[ot+b]}for(;b<at;++b)e[b]=e[b-X]}}r.l=m,r.p=_,r.b=b,r.f=g,m&&(g=1,r.m=E,r.d=M,r.n=O)}while(!g);return b!=e.length&&l?q(e,0,b):e.subarray(0,b)},D=function D(t,n,r){var e=n/8|0;t[e]|=r<<=7&n,t[e+1]|=r>>8},$=function $(t,n,r){var e=n/8|0;t[e]|=r<<=7&n,t[e+1]|=r>>8,t[e+2]|=r>>16},L=function L(t,e){for(var i=[],a=0;a<t.length;++a)t[a]&&i.push({s:a,f:t[a]});var o=i.length,s=i.slice();if(!o)return{t:P,l:0};if(1==o){var f=new n(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var h=i[0],u=i[1],l=0,c=1,v=2;for(i[0]={s:-1,f:h.f+u.f,l:h,r:u};c!=o-1;)h=i[i[l].f<i[v].f?l++:v++],u=i[l!=c&&i[l].f<i[v].f?l++:v++],i[c++]={s:-1,f:h.f+u.f,l:h,r:u};var p=s[0].s;for(a=1;a<o;++a)s[a].s>p&&(p=s[a].s);var d=new r(p+1),g=_B(i[c-1],d,0);if(g>e){a=0;var y=0,w=g-e,b=1<<w;for(s.sort(function(t,n){return d[n.s]-d[t.s]||t.f-n.f});a<o;++a){var m=s[a].s;if(!(d[m]>e))break;y+=b-(1<<g-d[m]),d[m]=e}for(y>>=w;y>0;){var z=s[a].s;d[z]<e?y-=1<<e-d[z]++-1:++a}for(;a>=0&&y;--a){var M=s[a].s;d[M]==e&&(--d[M],++y)}g=e}return{t:new n(d),l:g}},_B=function B(t,n,r){return-1==t.s?Math.max(_B(t.l,n,r+1),_B(t.r,n,r+1)):n[t.s]=r},C=function C(t){for(var n=t.length;n&&!t[--n];);for(var e=new r(++n),i=0,a=t[0],o=1,s=function s(t){e[i++]=t},f=1;f<=n;++f)if(t[f]==a&&f!=n)++o;else{if(!a&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(a),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(a);o=1,a=t[f]}return{c:e.subarray(0,i),n:n}},F=function F(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},I=function I(t,n,r){var e=r.length,i=T(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},W=function W(t,n,e,s,f,h,u,l,c,v,p){D(n,p++,e),++f[256];for(var d=L(f,15),g=d.t,z=d.l,S=L(h,15),k=S.t,x=S.l,A=C(g),T=A.c,q=A.n,E=C(k),U=E.c,O=E.n,B=new r(19),W=0;W<T.length;++W)++B[31&T[W]];for(W=0;W<U.length;++W)++B[31&U[W]];for(var j=L(B,7),P=j.t,R=j.l,V=19;V>4&&!P[o[V-1]];--V);var G,H,J,K,N=v+5<<3,Q=F(f,w)+F(h,b)+u,X=F(f,g)+F(h,k)+u+14+3*V+F(B,P)+2*B[16]+3*B[17]+7*B[18];if(c>=0&&N<=Q&&N<=X)return I(n,p,t.subarray(c,c+v));if(D(n,p,1+(X<Q)),p+=2,X<Q){G=y(g,z,0),H=g,J=y(k,x,0),K=k;var Y=y(P,R,0);for(D(n,p,q-257),D(n,p+5,O-1),D(n,p+10,V-4),p+=14,W=0;W<V;++W)D(n,p+3*W,P[o[W]]);p+=3*V;for(var Z=[T,U],_=0;_<2;++_){var tt=Z[_];for(W=0;W<tt.length;++W)D(n,p,Y[rt=31&tt[W]]),p+=P[rt],rt>15&&(D(n,p,tt[W]>>5&127),p+=tt[W]>>12)}}else G=m,H=w,J=M,K=b;for(W=0;W<l;++W){var nt=s[W];if(nt>255){var rt;$(n,p,G[257+(rt=nt>>18&31)]),p+=H[rt+257],rt>7&&(D(n,p,nt>>23&31),p+=i[rt]);var et=31&nt;$(n,p,J[et]),p+=K[et],et>3&&($(n,p,nt>>5&8191),p+=a[et])}else $(n,p,G[nt]),p+=H[nt]}return $(n,p,G[256]),p+H[256]},j=new e([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),P=new n(0),R=function R(t,o,s,f,h,l){var c=l.z||t.length,p=new n(f+c+5*(1+Math.ceil(c/7e3))+h),d=p.subarray(f,p.length-h),g=l.l,y=7&(l.r||0);if(o){y&&(d[0]=l.r>>3);for(var w=j[o-1],b=w>>13,m=8191&w,z=(1<<s)-1,M=l.p||new r(32768),S=l.h||new r(z+1),k=Math.ceil(s/3),x=2*k,A=function A(n){return(t[n]^t[n+1]<<k^t[n+2]<<x)&z},E=new e(25e3),U=new r(288),O=new r(32),D=0,$=0,L=l.i||0,B=0,C=l.w||0,F=0;L+2<c;++L){var P=A(L),R=32767&L,V=S[P];if(M[R]=V,S[P]=R,C<=L){var G=c-L;if((D>7e3||B>24576)&&(G>423||!g)){y=W(t,d,0,E,U,O,$,B,F,L-F,y),B=D=$=0,F=L;for(var H=0;H<286;++H)U[H]=0;for(H=0;H<30;++H)O[H]=0}var J=2,K=0,N=m,Q=R-V&32767;if(G>2&&P==A(L-Q))for(var X=Math.min(b,G)-1,Y=Math.min(32767,L),Z=Math.min(258,G);Q<=Y&&--N&&R!=V;){if(t[L+J]==t[L+J-Q]){for(var _=0;_<Z&&t[L+_]==t[L+_-Q];++_);if(_>J){if(J=_,K=Q,_>X)break;var tt=Math.min(Q,_-2),nt=0;for(H=0;H<tt;++H){var rt=L-Q+H&32767,et=rt-M[rt]&32767;et>nt&&(nt=et,V=rt)}}}Q+=(R=V)-(V=M[R])&32767}if(K){E[B++]=268435456|u[J]<<18|v[K];var it=31&u[J],at=31&v[K];$+=i[it]+a[at],++U[257+it],++O[at],C=L+J,++D}else E[B++]=t[L],++U[t[L]]}}for(L=Math.max(L,C);L<c;++L)E[B++]=t[L],++U[t[L]];y=W(t,d,g,E,U,O,$,B,F,L-F,y),g||(l.r=7&y|d[y/8|0]<<3,y-=7,l.h=S,l.p=M,l.i=L,l.w=C)}else{for(L=l.w||0;L<c+g;L+=65535){var ot=L+65535;ot>=c&&(d[y/8|0]=g,ot=c),y=I(d,y+1,t.subarray(L,ot))}l.i=c}return q(p,0,f+T(y)+h)},V=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),G=function G(){var t=-1;return{p:function p(n){for(var r=t,e=0;e<n.length;++e)r=V[255&r^n[e]]^r>>>8;t=r},d:function d(){return~t}}},H=function H(){var t=1,n=0;return{p:function p(r){for(var e=t,i=n,a=0|r.length,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=e+=r[o];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function d(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},J=function J(t,r,e,i,a){if(!a&&(a={l:1},r.dictionary)){var o=r.dictionary.subarray(-32768),s=new n(o.length+t.length);s.set(o),s.set(t,o.length),t=s,a.w=o.length}return R(t,null==r.level?6:r.level,null==r.mem?a.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):20:12+r.mem,e,i,a)},K=function K(t,n,r){for(var e=t(),i=t.toString(),a=i.slice(i.indexOf(\"[\")+1,i.lastIndexOf(\"]\")).replace(/\\s+/g,\"\").split(\",\"),o=0;o<e.length;++o){var s=e[o],f=a[o];if(\"function\"==typeof s){n+=\";\"+f+\"=\";var h=s.toString();if(s.prototype){if(-1!=h.indexOf(\"[native code]\")){var u=h.indexOf(\" \",8)+1;n+=h.slice(u,h.indexOf(\"(\",u))}else for(var l in n+=h,s.prototype)n+=\";\"+f+\".prototype.\"+l+\"=\"+s.prototype[l].toString()}else n+=h}else r[f]=s}return n},N=[],Q=function Q(){return[n,r,e,i,a,o,h,c,z,S,p,E,y,k,x,A,T,q,_U,O,wt,nt,rt]},X=function X(){return[n,r,e,i,a,o,u,v,m,w,M,b,p,j,P,y,D,$,L,_B,C,F,I,W,T,q,R,J,dt,nt]},Y=function Y(){return[ot,ht,at,G,V]},Z=function Z(){return[st,ft]},_=function _(){return[ut,at,H]},tt=function tt(){return[lt]},nt=function nt(t){return postMessage(t,[t.buffer])},rt=function rt(t){return t&&{out:t.size&&new n(t.size),dictionary:t.dictionary}},et=function et(t){return t.ondata=function(t,n){return postMessage([t,n],[t.buffer])},function(n){n.data.length?(t.push(n.data[0],n.data[1]),postMessage([n.data[0].length])):t.flush()}},it=function it(n,r,e,i,a,o,s){var f,h=function(n,e,i,a){if(!N[i]){for(var o=\"\",f={},u=n.length-1,l=0;l<u;++l)o=K(n[l],o,f);N[i]={c:K(n[u],o,f),e:f}}var c=function(t,n){var r={};for(var e in t)r[e]=t[e];for(var e in n)r[e]=n[e];return r}({},N[i].e);return function(n,r,e,i,a){var o=new Worker(t[r]||(t[r]=URL.createObjectURL(new Blob([n+';addEventListener(\"error\",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:\"text/javascript\"}))));return o.onmessage=function(t){var n=t.data,r=n.$e$;if(r){var e=new Error(r[0]);e.code=r[1],e.stack=r[2],a(e,null)}else a(null,n)},o.postMessage(e,i),o}(N[i].c+\";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=\"+e.toString()+\"}\",i,c,function(t){var n=[];for(var r in t)t[r].buffer&&n.push((t[r]=new t[r].constructor(t[r])).buffer);return n}(c),function(t,n){t?(h.terminate(),r.ondata.call(r,t)):Array.isArray(n)?1==n.length?(r.queuedSize-=n[0],r.ondrain&&r.ondrain(n[0])):(n[1]&&h.terminate(),r.ondata.call(r,t,n[0],n[1])):s(n)})}(n,i,a);h.postMessage(e),r.queuedSize=0,r.push=function(t,n){r.ondata||_U(5),f&&r.ondata(_U(4,0,1),null,!!n),r.queuedSize+=t.length,h.postMessage([t,f=n],[t.buffer])},r.terminate=function(){h.terminate()},o&&(r.flush=function(){h.postMessage([])})},at=function at(t,n,r){for(;r;++n)t[n]=r,r>>>=8},ot=function ot(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&at(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},st=function st(t){31==t[0]&&139==t[1]&&8==t[2]||_U(6,\"invalid gzip data\");var n=t[3],r=10;4&n&&(r+=2+(t[10]|t[11]<<8));for(var e=(n>>3&1)+(n>>4&1);e>0;e-=!t[r++]);return r+(2&n)},ft=function ft(t){var n=t.length;return(t[n-4]|t[n-3]<<8|t[n-2]<<16|t[n-1]<<24)>>>0},ht=function ht(t){return 10+(t.filename?t.filename.length+1:0)},ut=function ut(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=H();i.p(n.dictionary),at(t,2,i.d())}},lt=function lt(t,n){return(8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31)&&_U(6,\"invalid zlib data\"),(t[1]>>5&1)==+!n&&_U(6,\"invalid zlib data: \"+(32&t[1]?\"need\":\"unexpected\")+\" dictionary\"),2+(t[1]>>3&4)};function ct(t,n){return\"function\"==typeof t&&(n=t,t={}),this.ondata=n,t}var vt=function(){function t(t,r){if(\"function\"==typeof t&&(r=t,t={}),this.ondata=r,this.o=t||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new n(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return t.prototype.p=function(t,n){this.ondata(J(t,this.o,0,0,this.s),n)},t.prototype.push=function(t,r){this.ondata||_U(5),this.s.l&&_U(4);var e=t.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new n(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;this.b.set(t.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(t.subarray(a),32768),this.s.z=t.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(t,this.s.z),this.s.z+=t.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},t.prototype.flush=function(){this.ondata||_U(5),this.s.l&&_U(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},t}(),pt=function(){return function(t,n){it([X,function(){return[et,vt]}],this,ct.call(this,t,n),function(t){var n=new vt(t.data);onmessage=et(n)},6,1)}}();function dt(t,n){return J(t,n||{},0,0)}var gt=function(){function t(t,r){\"function\"==typeof t&&(r=t,t={}),this.ondata=r;var e=t&&t.dictionary&&t.dictionary.subarray(-32768);this.s={i:0,b:e?e.length:0},this.o=new n(32768),this.p=new n(0),e&&this.o.set(e)}return t.prototype.e=function(t){if(this.ondata||_U(5),this.d&&_U(4),this.p.length){if(t.length){var r=new n(this.p.length+t.length);r.set(this.p),r.set(t,this.p.length),this.p=r}}else this.p=t},t.prototype.c=function(t){this.s.i=+(this.d=t||!1);var n=this.s.b,r=O(this.p,this.s,this.o);this.ondata(q(r,n,this.s.b),this.d),this.o=q(r,this.s.b-32768),this.s.b=this.o.length,this.p=q(this.p,this.s.p/8|0),this.s.p&=7},t.prototype.push=function(t,n){this.e(t),this.c(n)},t}(),yt=function(){return function(t,n){it([Q,function(){return[et,gt]}],this,ct.call(this,t,n),function(t){var n=new gt(t.data);onmessage=et(n)},7,0)}}();function wt(t,n){return O(t,{i:2},n&&n.out,n&&n.dictionary)}var bt=function(){function t(t,n){this.c=G(),this.l=0,this.v=1,vt.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),this.l+=t.length,vt.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=J(t,this.o,this.v&&ht(this.o),n&&8,this.s);this.v&&(ot(r,this.o),this.v=0),n&&(at(r,r.length-8,this.c.d()),at(r,r.length-4,this.l)),this.ondata(r,n)},t.prototype.flush=function(){vt.prototype.flush.call(this)},t}(),mt=function(){return function(t,n){it([X,Y,function(){return[et,vt,bt]}],this,ct.call(this,t,n),function(t){var n=new bt(t.data);onmessage=et(n)},8,1)}}(),zt=function(){function t(t,n){this.v=1,this.r=0,gt.call(this,t,n)}return t.prototype.push=function(t,r){if(gt.prototype.e.call(this,t),this.r+=t.length,this.v){var e=this.p.subarray(this.v-1),i=e.length>3?st(e):4;if(i>e.length){if(!r)return}else this.v>1&&this.onmember&&this.onmember(this.r-e.length);this.p=e.subarray(i),this.v=0}gt.prototype.c.call(this,r),!this.s.f||this.s.l||r||(this.v=T(this.s.p)+9,this.s={i:0},this.o=new n(0),this.push(new n(0),r))},t}(),Mt=function(){return function(t,n){var r=this;it([Q,Z,function(){return[et,gt,zt]}],this,ct.call(this,t,n),function(t){var n=new zt(t.data);n.onmember=function(t){return postMessage(t)},onmessage=et(n)},9,0,function(t){return r.onmember&&r.onmember(t)})}}(),St=function(){function t(t,n){this.c=H(),this.v=1,vt.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),vt.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=J(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(ut(r,this.o),this.v=0),n&&at(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){vt.prototype.flush.call(this)},t}(),kt=function(){return function(t,n){it([X,_,function(){return[et,vt,St]}],this,ct.call(this,t,n),function(t){var n=new St(t.data);onmessage=et(n)},10,1)}}(),xt=function(){function t(t,n){gt.call(this,t,n),this.v=t&&t.dictionary?2:1}return t.prototype.push=function(t,n){if(gt.prototype.e.call(this,t),this.v){if(this.p.length<6&&!n)return;this.p=this.p.subarray(lt(this.p,this.v-1)),this.v=0}n&&(this.p.length<4&&_U(6,\"invalid zlib data\"),this.p=this.p.subarray(0,-4)),gt.prototype.c.call(this,n)},t}(),At=function(){return function(t,n){it([Q,tt,function(){return[et,gt,xt]}],this,ct.call(this,t,n),function(t){var n=new xt(t.data);onmessage=et(n)},11,0)}}(),Tt=\"undefined\"!=typeof TextDecoder&&new TextDecoder;try{Tt.decode(P,{stream:!0})}catch(t){}var qt=function qt(t){return function(){function _class(){var _this=this;_classCallCheck(this,_class);this.ondata=void 0,this.ondrain=void 0,this.queuedSize=void 0,this.i=void 0,this.i=new t,this.i.ondata=function(t,n){_this.ondata(null,t,n)}}return _createClass(_class,[{key:\"push\",value:function push(t,n){try{this.queuedSize+=t.length,this.i.push(t,n),this.queuedSize-=t.length,this.ondrain&&this.ondrain(t.length)}catch(t){this.ondata(t,null,n||!1)}}}])}()};var Et=1;try{(new pt).terminate()}catch(U){Et=0}var Ut=Et?{gzip:mt,deflate:kt,\"deflate-raw\":pt}:{gzip:qt(bt),deflate:qt(St),\"deflate-raw\":qt(vt)},Ot=Et?{gzip:Mt,deflate:At,\"deflate-raw\":yt}:{gzip:qt(zt),deflate:qt(xt),\"deflate-raw\":qt(gt)},Dt=function Dt(t,n,r){return function(_t4){function _class2(t){_classCallCheck(this,_class2);if(!arguments.length)throw new TypeError(\"Failed to construct '\".concat(r,\"': 1 argument required, but only 0 present.\"));var e=n[t];if(!e)throw new TypeError(\"Failed to construct '\".concat(r,\"': Unsupported compression format: '\").concat(t,\"'\"));var i,a=new e;return _callSuper(this,_class2,[{start:function start(t){a.ondata=function(n,r,e){n?t.error(n):r&&(t.enqueue(r),e&&(i?i():t.terminate()))}},transform:function transform(t){if(t instanceof ArrayBuffer)t=new Uint8Array(t);else{if(!ArrayBuffer.isView(t))throw new TypeError(\"The provided value is not of type '(ArrayBuffer or ArrayBufferView)'\");t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}if(a.push(t),a.queuedSize>=32768)return new Promise(function(t){a.ondrain=function(){a.queuedSize<32768&&t()}})},flush:function flush(){return new Promise(function(t){i=t,a.push(new Uint8Array(0),!0)})}},{size:function size(t){return 0|t.byteLength},highWaterMark:65536},{size:function size(t){return 0|t.byteLength},highWaterMark:65536}])}_inherits(_class2,_t4);return _createClass(_class2)}(t)},$t=\"undefined\"==typeof globalThis?\"undefined\"==typeof self?\"undefined\"==typeof global?{}:global:self:globalThis;var Lt;void 0===$t.CompressionStream&&($t.CompressionStream=(Lt=TransformStream,Dt(Lt,Ut,\"CompressionStream\"))),void 0===$t.DecompressionStream&&($t.DecompressionStream=function(t){return Dt(t,Ot,\"DecompressionStream\")}(TransformStream))});(function(){var NativeRegExp=RegExp;var nativeExec=RegExp.prototype.exec;var nativeTest=RegExp.prototype.test;var disablePatch=false;function containsLookbehind(pattern){if(typeof pattern!==\"string\")return false;for(var i=0;i<pattern.length-3;i++){if(pattern[i]===\"\\\\\"){i++;continue}if(pattern[i]===\"(\"&&pattern[i+1]===\"?\"&&pattern[i+2]===\"<\"&&(pattern[i+3]===\"=\"||pattern[i+3]===\"!\")){return true}}return false}function extractLookbehind(pattern){var lbMatch=pattern.match(/^(\\(\\?<([=!])((?:\\\\.|[^\\\\()])*)\\))/);if(!lbMatch)return null;return{full:lbMatch[1],type:lbMatch[2],pattern:lbMatch[3],rest:pattern.slice(lbMatch[1].length)}}function emulateExec(str){if(disablePatch)return nativeExec.call(this,str);var parsed=this.__lookbehind;if(!parsed)return nativeExec.call(this,str);var lbRe,mainRe;try{disablePatch=true;lbRe=new NativeRegExp(parsed.pattern+\"$\",this.__originalFlags.replace(\"g\",\"\"));mainRe=new NativeRegExp(parsed.rest,this.__originalFlags)}catch(e){disablePatch=false;return null}finally{disablePatch=false}for(var pos=0;pos<=str.length;pos++){var mainMatch=void 0;try{disablePatch=true;mainMatch=mainRe.exec(str.slice(pos))}finally{disablePatch=false}if(!mainMatch||mainMatch.index!==0)continue;var prefix=str.slice(0,pos);var lbMatchFound=void 0;try{disablePatch=true;lbMatchFound=lbRe.test(prefix)}finally{disablePatch=false}if(parsed.type===\"=\"&&lbMatchFound||parsed.type===\"!\"&&!lbMatchFound){mainMatch.index=pos;mainMatch.input=str;return mainMatch}}return null}function emulateTest(str){if(disablePatch)return nativeTest.call(this,str);var result=emulateExec.call(this,str);return result!==null}function PatchedRegExp(pattern,flags){var _ref2;var patternStr=typeof pattern===\"string\"?pattern:pattern.source;var flagsStr=(_ref2=flags!==null&&flags!==void 0?flags:pattern&&pattern.flags)!==null&&_ref2!==void 0?_ref2:\"\";if(!containsLookbehind(patternStr)){return new NativeRegExp(patternStr,flagsStr)}var parsed=extractLookbehind(patternStr);if(!parsed){return new NativeRegExp(patternStr,flagsStr)}var fakePattern=parsed.rest;var re=new NativeRegExp(fakePattern,flagsStr);re.__lookbehind=parsed;re.__originalFlags=flagsStr;re.exec=emulateExec;re.test=emulateTest;return re}PatchedRegExp.prototype=NativeRegExp.prototype;PatchedRegExp.prototype.constructor=PatchedRegExp;RegExp=PatchedRegExp;RegExp.prototype.exec=function patchedExec(str){if(disablePatch)return nativeExec.call(this,str);var patternStr=this.source;var flagsStr=this.flags;if(!containsLookbehind(patternStr)){return nativeExec.call(this,str)}var parsed=extractLookbehind(patternStr);if(!parsed){return nativeExec.call(this,str)}var fake=new NativeRegExp(parsed.rest,flagsStr);fake.__lookbehind=parsed;fake.__originalFlags=flagsStr;return emulateExec.call(fake,str)};RegExp.prototype.test=function patchedTest(str){if(disablePatch)return nativeTest.call(this,str);var patternStr=this.source;var flagsStr=this.flags;if(!containsLookbehind(patternStr)){return nativeTest.call(this,str)}var parsed=extractLookbehind(patternStr);if(!parsed){return nativeTest.call(this,str)}var fake=new NativeRegExp(parsed.rest,flagsStr);fake.__lookbehind=parsed;fake.__originalFlags=flagsStr;return emulateTest.call(fake,str)}})();";

// Polyfill scripts for iOS < 10.0
static NSString *scripts_before_10_0 = @"\
\"use strict\";function _typeof(o){\"@babel/helpers - typeof\";return _typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&\"function\"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?\"symbol\":typeof o},_typeof(o)}if(\"NodeList\"in window&&!NodeList.prototype.forEach){NodeList.prototype.forEach=function(callback,thisArg){thisArg=thisArg||window;for(var i=0;i<this.length;i++){callback.call(thisArg,this[i],i,this)}}}(function(){function n(){function w(){return null}function m(a){return a?\"object\"===_typeof(a)||\"function\"===typeof a:!1}function p(a){if(null!==a&&!m(a))throw new TypeError(\"Object prototype may only be an Object or null: \"+a)}function x(a,c,B){function k(){}if(!m(a)||!m(c))throw new TypeError(\"Cannot create proxy with a non-object as target or handler\");var g=c;c={get:null,set:null,apply:null,construct:null};for(var h in g){if(!(h in c))throw new TypeError(\"Proxy polyfill does not support trap '\"+h+\"'\");c[h]=g[h]}\"function\"===typeof g&&(c.apply=g.apply.bind(g));g=C(a);var q=!1,r=!1;if(\"function\"===typeof a){var _f=function f(){var b=this&&this.constructor===_f,d=Array.prototype.slice.call(arguments);k(b?\"construct\":\"apply\");return b&&c.construct?c.construct.call(this,a,d):!b&&c.apply?c.apply(a,this,d):b?(d.unshift(a),new(a.bind.apply(a,d))):a.apply(this,d)};q=!0}else a instanceof Array?(_f=[],r=!0):_f=y||null!==g?D(g):{};var z=c.get?function(b){k(\"get\");return c.get(this,b,_f)}:function(b){k(\"get\");return this[b]},E=c.set?function(b,d){k(\"set\");c.set(this,b,d,_f)}:function(b,d){k(\"set\");this[b]=d};h=e.getOwnPropertyNames(a).map(function(b){return{name:b,source:a}});for(var l=g;l&&l!==e.prototype;)h=h.concat(e.getOwnPropertyNames(l).map(function(b){return{name:b,source:l}})),l=e.getPrototypeOf(l);var t={};h.forEach(function(b){var d=b.name;(q||r)&&d in _f||t[d]||(b=e.getOwnPropertyDescriptor(b.source,d),e.defineProperty(_f,d,{enumerable:!!b.enumerable,get:z.bind(a,d),set:E.bind(a,d)}),t[d]=!0)});h=!0;if(q||r){var F=e.setPrototypeOf||([].__proto__===Array.prototype?function(b,d){p(d);b.__proto__=d;return b}:w);g&&F(_f,g)||(h=!1)}if(c.get||!h)for(var u in a)t[u]||e.defineProperty(_f,u,{get:z.bind(a,u)});e.seal(a);e.seal(_f);return B?{proxy:_f,revoke:function revoke(){a=null;k=function k(b){throw new TypeError(\"Cannot perform '\"+b+\"' on a proxy that has been revoked\")}}}:_f}var e=Object,y=!!e.create||!({__proto__:null}instanceof e),D=e.create||(y?function(a){p(a);return{__proto__:a}}:function(a){function c(){}p(a);if(null===a)throw new SyntaxError(\"Native Object.create is required to create objects with null prototype\");c.prototype=a;return new c}),C=e.getPrototypeOf||([].__proto__===Array.prototype?function(a){a=a.__proto__;return m(a)?a:null}:w);var _v=function v(a,c){if(void 0===(this&&this instanceof _v?this.constructor:void 0))throw new TypeError(\"Constructor Proxy requires 'new'\");return x(a,c)};_v.revocable=function(a,c){return x(a,c,!0)};return _v}var A=\"undefined\"!==typeof process&&\"[object process]\"==={}.toString.call(process)||\"undefined\"!==typeof navigator&&\"ReactNative\"===navigator.product?global:self;A.Proxy||(A.Proxy=n(),A.Proxy.revocable=A.Proxy.revocable)})();";

// Polyfill scripts for iOS < 14.1
static NSString *scripts_before_14_1 = @"\
\"use strict\";function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function _toPropertyKey(t){var i=_toPrimitive(t,\"string\");return\"symbol\"==_typeof(i)?i:i+\"\"}function _toPrimitive(t,r){if(\"object\"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||\"default\");if(\"object\"!=_typeof(i))return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===r?String:Number)(t)}function _typeof(o){\"@babel/helpers - typeof\";return _typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&\"function\"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?\"symbol\":typeof o},_typeof(o)}!function(){\"use strict\";function e(){}function t(e){return\"object\"==_typeof(e)&&null!==e||\"function\"==typeof e}var r=e;function o(e,t){try{Object.defineProperty(e,\"name\",{value:t,configurable:!0})}catch(e){}}var n=Promise,a=Promise.resolve.bind(n),i=Promise.prototype.then,l=Promise.reject.bind(n),s=a;function u(e){return new n(e)}function c(e){return u(function(t){return t(e)})}function d(e){return l(e)}function f(e,t,r){return i.call(e,t,r)}function b(e,t,o){f(f(e,t,o),void 0,r)}function h(e,t){b(e,t)}function m(e,t){b(e,void 0,t)}function _(e,t,r){return f(e,t,r)}function p(e){f(e,void 0,r)}var _y=function y(e){if(\"function\"==typeof queueMicrotask)_y=queueMicrotask;else{var _e2=c(void 0);_y=function y(t){return f(_e2,t)}}return _y(e)};function S(e,t,r){if(\"function\"!=typeof e)throw new TypeError(\"Argument is not a function\");return Function.prototype.apply.call(e,t,r)}function g(e,t,r){try{return c(S(e,t,r))}catch(e){return d(e)}}var v=function(){function v(){_classCallCheck(this,v);this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return _createClass(v,[{key:\"length\",get:function get(){return this._size}},{key:\"push\",value:function push(e){var t=this._back;var r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}},{key:\"shift\",value:function shift(){var e=this._front;var t=e;var r=this._cursor;var o=r+1;var n=e._elements,a=n[r];return 16384===o&&(t=e._next,o=0),--this._size,this._cursor=o,e!==t&&(this._front=t),n[r]=void 0,a}},{key:\"forEach\",value:function forEach(e){var t=this._cursor,r=this._front,o=r._elements;for(;!(t===o.length&&void 0===r._next||t===o.length&&(r=r._next,o=r._elements,t=0,0===o.length));)e(o[t]),++t}},{key:\"peek\",value:function peek(){var e=this._front,t=this._cursor;return e._elements[t]}}])}();var w=Symbol(\"[[AbortSteps]]\"),R=Symbol(\"[[ErrorSteps]]\"),T=Symbol(\"[[CancelSteps]]\"),C=Symbol(\"[[PullSteps]]\"),P=Symbol(\"[[ReleaseSteps]]\");function q(e,t){e._ownerReadableStream=t,t._reader=e,\"readable\"===t._state?O(e):\"closed\"===t._state?function(e){O(e),A(e)}(e):j(e,t._storedError)}function E(e,t){return Br(e._ownerReadableStream,t)}function W(e){var t=e._ownerReadableStream;\"readable\"===t._state?k(e,new TypeError(\"Reader was released and can no longer be used to monitor the stream's closedness\")):function(e,t){j(e,t)}(e,new TypeError(\"Reader was released and can no longer be used to monitor the stream's closedness\")),t._readableStreamController[P](),t._reader=void 0,e._ownerReadableStream=void 0}function B(e){return new TypeError(\"Cannot \"+e+\" a stream using a released reader\")}function O(e){e._closedPromise=u(function(t,r){e._closedPromise_resolve=t,e._closedPromise_reject=r})}function j(e,t){O(e),k(e,t)}function k(e,t){void 0!==e._closedPromise_reject&&(p(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function A(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var z=Number.isFinite||function(e){return\"number\"==typeof e&&isFinite(e)},D=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function L(e,t){if(void 0!==e&&\"object\"!=_typeof(r=e)&&\"function\"!=typeof r)throw new TypeError(\"\".concat(t,\" is not an object.\"));var r}function F(e,t){if(\"function\"!=typeof e)throw new TypeError(\"\".concat(t,\" is not a function.\"))}function I(e,t){if(!function(e){return\"object\"==_typeof(e)&&null!==e||\"function\"==typeof e}(e))throw new TypeError(\"\".concat(t,\" is not an object.\"))}function $(e,t,r){if(void 0===e)throw new TypeError(\"Parameter \".concat(t,\" is required in '\").concat(r,\"'.\"))}function M(e,t,r){if(void 0===e)throw new TypeError(\"\".concat(t,\" is required in '\").concat(r,\"'.\"))}function Y(e){return Number(e)}function Q(e){return 0===e?0:e}function x(e,t){var r=Number.MAX_SAFE_INTEGER;var o=Number(e);if(o=Q(o),!z(o))throw new TypeError(\"\".concat(t,\" is not a finite number\"));if(o=function(e){return Q(D(e))}(o),o<0||o>r)throw new TypeError(\"\".concat(t,\" is outside the accepted range of 0 to \").concat(r,\", inclusive\"));return z(o)&&0!==o?o:0}function N(e,t){if(!Er(e))throw new TypeError(\"\".concat(t,\" is not a ReadableStream.\"))}function H(e){return new ReadableStreamDefaultReader(e)}function V(e,t){e._reader._readRequests.push(t)}function U(e,t,r){var o=e._reader._readRequests.shift();r?o._closeSteps():o._chunkSteps(t)}function G(e){return e._reader._readRequests.length}function X(e){var t=e._reader;return void 0!==t&&!!J(t)}var ReadableStreamDefaultReader=function(){function ReadableStreamDefaultReader(e){_classCallCheck(this,ReadableStreamDefaultReader);if($(e,1,\"ReadableStreamDefaultReader\"),N(e,\"First parameter\"),Wr(e))throw new TypeError(\"This stream has already been locked for exclusive reading by another reader\");q(this,e),this._readRequests=new v}return _createClass(ReadableStreamDefaultReader,[{key:\"closed\",get:function get(){return J(this)?this._closedPromise:d(ee(\"closed\"))}},{key:\"cancel\",value:function cancel(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;return J(this)?void 0===this._ownerReadableStream?d(B(\"cancel\")):E(this,e):d(ee(\"cancel\"))}},{key:\"read\",value:function read(){if(!J(this))return d(ee(\"read\"));if(void 0===this._ownerReadableStream)return d(B(\"read from\"));var e,t;var r=u(function(r,o){e=r,t=o});return K(this,{_chunkSteps:function _chunkSteps(t){return e({value:t,done:!1})},_closeSteps:function _closeSteps(){return e({value:void 0,done:!0})},_errorSteps:function _errorSteps(e){return t(e)}}),r}},{key:\"releaseLock\",value:function releaseLock(){if(!J(this))throw ee(\"releaseLock\");void 0!==this._ownerReadableStream&&function(e){W(e);var t=new TypeError(\"Reader was released\");Z(e,t)}(this)}}])}();function J(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_readRequests\")&&e instanceof ReadableStreamDefaultReader}function K(e,t){var r=e._ownerReadableStream;r._disturbed=!0,\"closed\"===r._state?t._closeSteps():\"errored\"===r._state?t._errorSteps(r._storedError):r._readableStreamController[C](t)}function Z(e,t){var r=e._readRequests;e._readRequests=new v,r.forEach(function(e){e._errorSteps(t)})}function ee(e){return new TypeError(\"ReadableStreamDefaultReader.prototype.\".concat(e,\" can only be used on a ReadableStreamDefaultReader\"))}var te,re,oe;function ne(e){return e.slice()}function ae(e,t,r,o,n){new Uint8Array(e).set(new Uint8Array(r,o,n),t)}Object.defineProperties(ReadableStreamDefaultReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),o(ReadableStreamDefaultReader.prototype.cancel,\"cancel\"),o(ReadableStreamDefaultReader.prototype.read,\"read\"),o(ReadableStreamDefaultReader.prototype.releaseLock,\"releaseLock\"),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(ReadableStreamDefaultReader.prototype,Symbol.toStringTag,{value:\"ReadableStreamDefaultReader\",configurable:!0});var _ie=function ie(e){return _ie=\"function\"==typeof e.transfer?function(e){return e.transfer()}:\"function\"==typeof structuredClone?function(e){return structuredClone(e,{transfer:[e]})}:function(e){return e},_ie(e)},_le=function le(e){return _le=\"boolean\"==typeof e.detached?function(e){return e.detached}:function(e){return 0===e.byteLength},_le(e)};function se(e,t,r){if(e.slice)return e.slice(t,r);var o=r-t,n=new ArrayBuffer(o);return ae(n,0,e,t,o),n}function ue(e,t){var r=e[t];if(null!=r){if(\"function\"!=typeof r)throw new TypeError(\"\".concat(String(t),\" is not a function\"));return r}}function ce(e){try{var _t2=e.done,_r2=e.value;return f(s(_r2),function(e){return{done:_t2,value:e}})}catch(e){return d(e)}}var de=null!==(oe=null!==(te=Symbol.asyncIterator)&&void 0!==te?te:null===(re=Symbol[\"for\"])||void 0===re?void 0:re.call(Symbol,\"Symbol.asyncIterator\"))&&void 0!==oe?oe:\"@@asyncIterator\";function fe(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"sync\";var o=arguments.length>2?arguments[2]:undefined;if(void 0===o)if(\"async\"===r){if(void 0===(o=ue(e,de))){return function(e){var r={next:function next(){var t;try{t=be(e)}catch(e){return d(e)}return ce(t)},return:function _return(r){var o;try{var _t3=ue(e.iterator,\"return\");if(void 0===_t3)return c({done:!0,value:r});o=S(_t3,e.iterator,[r])}catch(e){return d(e)}return t(o)?ce(o):d(new TypeError(\"The iterator.return() method must return an object\"))}};return{iterator:r,nextMethod:r.next,done:!1}}(fe(e,\"sync\",ue(e,Symbol.iterator)))}}else o=ue(e,Symbol.iterator);if(void 0===o)throw new TypeError(\"The object is not iterable\");var n=S(o,e,[]);if(!t(n))throw new TypeError(\"The iterator method must return an object\");return{iterator:n,nextMethod:n.next,done:!1}}function be(e){var r=S(e.nextMethod,e.iterator,[]);if(!t(r))throw new TypeError(\"The iterator.next() method must return an object\");return r}var he=function(){function he(e,t){_classCallCheck(this,he);this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}return _createClass(he,[{key:\"next\",value:function next(){var _this=this;var e=function e(){return _this._nextSteps()};return this._ongoingPromise=this._ongoingPromise?_(this._ongoingPromise,e,e):e(),this._ongoingPromise}},{key:\"return\",value:function _return(e){var _this2=this;var t=function t(){return _this2._returnSteps(e)};return this._ongoingPromise=this._ongoingPromise?_(this._ongoingPromise,t,t):t(),this._ongoingPromise}},{key:\"_nextSteps\",value:function _nextSteps(){var _this3=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var e=this._reader;var t,r;var o=u(function(e,o){t=e,r=o});return K(e,{_chunkSteps:function _chunkSteps(e){_this3._ongoingPromise=void 0,_y(function(){return t({value:e,done:!1})})},_closeSteps:function _closeSteps(){_this3._ongoingPromise=void 0,_this3._isFinished=!0,W(e),t({value:void 0,done:!0})},_errorSteps:function _errorSteps(t){_this3._ongoingPromise=void 0,_this3._isFinished=!0,W(e),r(t)}}),o}},{key:\"_returnSteps\",value:function _returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;var t=this._reader;if(!this._preventCancel){var _r3=E(t,e);return W(t),_(_r3,function(){return{value:e,done:!0}})}return W(t),c({value:e,done:!0})}}])}();var me=_defineProperty({next:function next(){return _e(this)?this._asyncIteratorImpl.next():d(pe(\"next\"))},return:function _return(e){return _e(this)?this._asyncIteratorImpl[\"return\"](e):d(pe(\"return\"))}},de,function(){return this});function _e(e){if(!t(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,\"_asyncIteratorImpl\"))return!1;try{return e._asyncIteratorImpl instanceof he}catch(e){return!1}}function pe(e){return new TypeError(\"ReadableStreamAsyncIterator.\".concat(e,\" can only be used on a ReadableSteamAsyncIterator\"))}Object.defineProperty(me,de,{enumerable:!1});var ye=Number.isNaN||function(e){return e!=e};function Se(e){var t=se(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function ge(e){var t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function ve(e,t,r){if(\"number\"!=typeof(o=r)||ye(o)||o<0||r===1/0)throw new RangeError(\"Size must be a finite, non-NaN, non-negative number.\");var o;e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function we(e){e._queue=new v,e._queueTotalSize=0}function Re(e){return e===DataView}var ReadableStreamBYOBRequest=function(){function ReadableStreamBYOBRequest(){_classCallCheck(this,ReadableStreamBYOBRequest);throw new TypeError(\"Illegal constructor\")}return _createClass(ReadableStreamBYOBRequest,[{key:\"view\",get:function get(){if(!Ce(this))throw Ke(\"view\");return this._view}},{key:\"respond\",value:function respond(e){if(!Ce(this))throw Ke(\"respond\");if($(e,1,\"respond\"),e=x(e,\"First parameter\"),void 0===this._associatedReadableByteStreamController)throw new TypeError(\"This BYOB request has been invalidated\");if(_le(this._view.buffer))throw new TypeError(\"The BYOB request's buffer has been detached and so cannot be used as a response\");Ge(this._associatedReadableByteStreamController,e)}},{key:\"respondWithNewView\",value:function respondWithNewView(e){if(!Ce(this))throw Ke(\"respondWithNewView\");if($(e,1,\"respondWithNewView\"),!ArrayBuffer.isView(e))throw new TypeError(\"You can only respond with array buffer views\");if(void 0===this._associatedReadableByteStreamController)throw new TypeError(\"This BYOB request has been invalidated\");if(_le(e.buffer))throw new TypeError(\"The given view's buffer has been detached and so cannot be used as a response\");Xe(this._associatedReadableByteStreamController,e)}}])}();Object.defineProperties(ReadableStreamBYOBRequest.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),o(ReadableStreamBYOBRequest.prototype.respond,\"respond\"),o(ReadableStreamBYOBRequest.prototype.respondWithNewView,\"respondWithNewView\"),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(ReadableStreamBYOBRequest.prototype,Symbol.toStringTag,{value:\"ReadableStreamBYOBRequest\",configurable:!0});var ReadableByteStreamController=function(){function ReadableByteStreamController(){_classCallCheck(this,ReadableByteStreamController);throw new TypeError(\"Illegal constructor\")}return _createClass(ReadableByteStreamController,[{key:\"byobRequest\",get:function get(){if(!Te(this))throw Ze(\"byobRequest\");return Ve(this)}},{key:\"desiredSize\",get:function get(){if(!Te(this))throw Ze(\"desiredSize\");return Ue(this)}},{key:\"close\",value:function close(){if(!Te(this))throw Ze(\"close\");if(this._closeRequested)throw new TypeError(\"The stream has already been closed; do not close it again!\");var e=this._controlledReadableByteStream._state;if(\"readable\"!==e)throw new TypeError(\"The stream (in \".concat(e,\" state) is not in the readable state and cannot be closed\"));Qe(this)}},{key:\"enqueue\",value:function enqueue(e){if(!Te(this))throw Ze(\"enqueue\");if($(e,1,\"enqueue\"),!ArrayBuffer.isView(e))throw new TypeError(\"chunk must be an array buffer view\");if(0===e.byteLength)throw new TypeError(\"chunk must have non-zero byteLength\");if(0===e.buffer.byteLength)throw new TypeError(\"chunk's buffer must have non-zero byteLength\");if(this._closeRequested)throw new TypeError(\"stream is closed or draining\");var t=this._controlledReadableByteStream._state;if(\"readable\"!==t)throw new TypeError(\"The stream (in \".concat(t,\" state) is not in the readable state and cannot be enqueued to\"));xe(this,e)}},{key:\"error\",value:function error(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;if(!Te(this))throw Ze(\"error\");Ne(this,e)}},{key:T,value:function value(e){qe(this),we(this);var t=this._cancelAlgorithm(e);return Ye(this),t}},{key:C,value:function value(e){var t=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void He(this,e);var r=this._autoAllocateChunkSize;if(void 0!==r){var _t4;try{_t4=new ArrayBuffer(r)}catch(t){return void e._errorSteps(t)}var _o={buffer:_t4,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:\"default\"};this._pendingPullIntos.push(_o)}V(t,e),Pe(this)}},{key:P,value:function value(){if(this._pendingPullIntos.length>0){var _e3=this._pendingPullIntos.peek();_e3.readerType=\"none\",this._pendingPullIntos=new v,this._pendingPullIntos.push(_e3)}}}])}();function Te(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_controlledReadableByteStream\")&&e instanceof ReadableByteStreamController}function Ce(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_associatedReadableByteStreamController\")&&e instanceof ReadableStreamBYOBRequest}function Pe(e){var t=function(e){var t=e._controlledReadableByteStream;if(\"readable\"!==t._state)return!1;if(e._closeRequested)return!1;if(!e._started)return!1;if(X(t)&&G(t)>0)return!0;if(nt(t)&&ot(t)>0)return!0;var r=Ue(e);if(r>0)return!0;return!1}(e);if(!t)return;if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0;b(e._pullAlgorithm(),function(){return e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Pe(e)),null},function(t){return Ne(e,t),null})}function qe(e){Le(e),e._pendingPullIntos=new v}function Ee(e,t){var r=!1;\"closed\"===e._state&&(r=!0);var o=Be(t);\"default\"===t.readerType?U(e,o,r):function(e,t,r){var o=e._reader,n=o._readIntoRequests.shift();r?n._closeSteps(t):n._chunkSteps(t)}(e,o,r)}function We(e,t){for(var _r4=0;_r4<t.length;++_r4)Ee(e,t[_r4])}function Be(e){var t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function Oe(e,t,r,o){e._queue.push({buffer:t,byteOffset:r,byteLength:o}),e._queueTotalSize+=o}function je(e,t,r,o){var n;try{n=se(t,r,r+o)}catch(t){throw Ne(e,t),t}Oe(e,n,0,o)}function ke(e,t){t.bytesFilled>0&&je(e,t.buffer,t.byteOffset,t.bytesFilled),Me(e)}function Ae(e,t){var r=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),o=t.bytesFilled+r;var n=r,a=!1;var i=o-o%t.elementSize;i>=t.minimumFill&&(n=i-t.bytesFilled,a=!0);var l=e._queue;for(;n>0;){var _r5=l.peek(),_o2=Math.min(n,_r5.byteLength),_a=t.byteOffset+t.bytesFilled;ae(t.buffer,_a,_r5.buffer,_r5.byteOffset,_o2),_r5.byteLength===_o2?l.shift():(_r5.byteOffset+=_o2,_r5.byteLength-=_o2),e._queueTotalSize-=_o2,ze(e,_o2,t),n-=_o2}return a}function ze(e,t,r){r.bytesFilled+=t}function De(e){0===e._queueTotalSize&&e._closeRequested?(Ye(e),Or(e._controlledReadableByteStream)):Pe(e)}function Le(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Fe(e){var t=[];for(;e._pendingPullIntos.length>0&&0!==e._queueTotalSize;){var _r6=e._pendingPullIntos.peek();Ae(e,_r6)&&(Me(e),t.push(_r6))}return t}function Ie(e,t,r,o){var n=e._controlledReadableByteStream,a=t.constructor,i=function(e){return Re(e)?1:e.BYTES_PER_ELEMENT}(a),l=t.byteOffset,s=t.byteLength,u=r*i;var c;try{c=_ie(t.buffer)}catch(e){return void o._errorSteps(e)}var d={buffer:c,bufferByteLength:c.byteLength,byteOffset:l,byteLength:s,bytesFilled:0,minimumFill:u,elementSize:i,viewConstructor:a,readerType:\"byob\"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(d),void rt(n,o);if(\"closed\"!==n._state){if(e._queueTotalSize>0){if(Ae(e,d)){var _t5=Be(d);return De(e),void o._chunkSteps(_t5)}if(e._closeRequested){var _t6=new TypeError(\"Insufficient bytes to fill elements in the given buffer\");return Ne(e,_t6),void o._errorSteps(_t6)}}e._pendingPullIntos.push(d),rt(n,o),Pe(e)}else{var _e4=new a(d.buffer,d.byteOffset,0);o._closeSteps(_e4)}}function $e(e,t){var r=e._pendingPullIntos.peek();Le(e);\"closed\"===e._controlledReadableByteStream._state?function(e,t){\"none\"===t.readerType&&Me(e);var r=e._controlledReadableByteStream;if(nt(r)){var _t7=[];for(var _o3=0;_o3<ot(r);++_o3)_t7.push(Me(e));We(r,_t7)}}(e,r):function(e,t,r){if(ze(0,t,r),\"none\"===r.readerType){ke(e,r);var _t8=Fe(e);return void We(e._controlledReadableByteStream,_t8)}if(r.bytesFilled<r.minimumFill)return;Me(e);var o=r.bytesFilled%r.elementSize;if(o>0){var _t9=r.byteOffset+r.bytesFilled;je(e,r.buffer,_t9-o,o)}r.bytesFilled-=o;var n=Fe(e);Ee(e._controlledReadableByteStream,r),We(e._controlledReadableByteStream,n)}(e,t,r),Pe(e)}function Me(e){return e._pendingPullIntos.shift()}function Ye(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Qe(e){var t=e._controlledReadableByteStream;if(!e._closeRequested&&\"readable\"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0){var _t0=e._pendingPullIntos.peek();if(_t0.bytesFilled%_t0.elementSize!=0){var _t1=new TypeError(\"Insufficient bytes to fill elements in the given buffer\");throw Ne(e,_t1),_t1}}Ye(e),Or(t)}}function xe(e,t){var r=e._controlledReadableByteStream;if(e._closeRequested||\"readable\"!==r._state)return;var o=t.buffer,n=t.byteOffset,a=t.byteLength;if(_le(o))throw new TypeError(\"chunk's buffer is detached and so cannot be enqueued\");var i=_ie(o);if(e._pendingPullIntos.length>0){var _t10=e._pendingPullIntos.peek();if(_le(_t10.buffer))throw new TypeError(\"The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk\");Le(e),_t10.buffer=_ie(_t10.buffer),\"none\"===_t10.readerType&&ke(e,_t10)}if(X(r)){if(function(e){var t=e._controlledReadableByteStream._reader;for(;t._readRequests.length>0;){if(0===e._queueTotalSize)return;He(e,t._readRequests.shift())}}(e),0===G(r))Oe(e,i,n,a);else{e._pendingPullIntos.length>0&&Me(e);U(r,new Uint8Array(i,n,a),!1)}}else if(nt(r)){Oe(e,i,n,a);var _t11=Fe(e);We(e._controlledReadableByteStream,_t11)}else Oe(e,i,n,a);Pe(e)}function Ne(e,t){var r=e._controlledReadableByteStream;\"readable\"===r._state&&(qe(e),we(e),Ye(e),jr(r,t))}function He(e,t){var r=e._queue.shift();e._queueTotalSize-=r.byteLength,De(e);var o=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t._chunkSteps(o)}function Ve(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){var _t12=e._pendingPullIntos.peek(),_r7=new Uint8Array(_t12.buffer,_t12.byteOffset+_t12.bytesFilled,_t12.byteLength-_t12.bytesFilled),_o4=Object.create(ReadableStreamBYOBRequest.prototype);!function(e,t,r){e._associatedReadableByteStreamController=t,e._view=r}(_o4,e,_r7),e._byobRequest=_o4}return e._byobRequest}function Ue(e){var t=e._controlledReadableByteStream._state;return\"errored\"===t?null:\"closed\"===t?0:e._strategyHWM-e._queueTotalSize}function Ge(e,t){var r=e._pendingPullIntos.peek();if(\"closed\"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError(\"bytesWritten must be 0 when calling respond() on a closed stream\")}else{if(0===t)throw new TypeError(\"bytesWritten must be greater than 0 when calling respond() on a readable stream\");if(r.bytesFilled+t>r.byteLength)throw new RangeError(\"bytesWritten out of range\")}r.buffer=_ie(r.buffer),$e(e,t)}function Xe(e,t){var r=e._pendingPullIntos.peek();if(\"closed\"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError(\"The view's length must be 0 when calling respondWithNewView() on a closed stream\")}else if(0===t.byteLength)throw new TypeError(\"The view's length must be greater than 0 when calling respondWithNewView() on a readable stream\");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError(\"The region specified by view does not match byobRequest\");if(r.bufferByteLength!==t.buffer.byteLength)throw new RangeError(\"The buffer of view has different capacity than byobRequest\");if(r.bytesFilled+t.byteLength>r.byteLength)throw new RangeError(\"The region specified by view is larger than byobRequest\");var o=t.byteLength;r.buffer=_ie(t.buffer),$e(e,o)}function Je(e,t,r,o,n,a,i){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,we(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=a,t._pullAlgorithm=o,t._cancelAlgorithm=n,t._autoAllocateChunkSize=i,t._pendingPullIntos=new v,e._readableStreamController=t;b(c(r()),function(){return t._started=!0,Pe(t),null},function(e){return Ne(t,e),null})}function Ke(e){return new TypeError(\"ReadableStreamBYOBRequest.prototype.\".concat(e,\" can only be used on a ReadableStreamBYOBRequest\"))}function Ze(e){return new TypeError(\"ReadableByteStreamController.prototype.\".concat(e,\" can only be used on a ReadableByteStreamController\"))}function et(e,t){if(\"byob\"!==(e=\"\".concat(e)))throw new TypeError(\"\".concat(t,\" '\").concat(e,\"' is not a valid enumeration value for ReadableStreamReaderMode\"));return e}function tt(e){return new ReadableStreamBYOBReader(e)}function rt(e,t){e._reader._readIntoRequests.push(t)}function ot(e){return e._reader._readIntoRequests.length}function nt(e){var t=e._reader;return void 0!==t&&!!at(t)}Object.defineProperties(ReadableByteStreamController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),o(ReadableByteStreamController.prototype.close,\"close\"),o(ReadableByteStreamController.prototype.enqueue,\"enqueue\"),o(ReadableByteStreamController.prototype.error,\"error\"),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(ReadableByteStreamController.prototype,Symbol.toStringTag,{value:\"ReadableByteStreamController\",configurable:!0});var ReadableStreamBYOBReader=function(){function ReadableStreamBYOBReader(e){_classCallCheck(this,ReadableStreamBYOBReader);if($(e,1,\"ReadableStreamBYOBReader\"),N(e,\"First parameter\"),Wr(e))throw new TypeError(\"This stream has already been locked for exclusive reading by another reader\");if(!Te(e._readableStreamController))throw new TypeError(\"Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source\");q(this,e),this._readIntoRequests=new v}return _createClass(ReadableStreamBYOBReader,[{key:\"closed\",get:function get(){return at(this)?this._closedPromise:d(st(\"closed\"))}},{key:\"cancel\",value:function cancel(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;return at(this)?void 0===this._ownerReadableStream?d(B(\"cancel\")):E(this,e):d(st(\"cancel\"))}},{key:\"read\",value:function read(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!at(this))return d(st(\"read\"));if(!ArrayBuffer.isView(e))return d(new TypeError(\"view must be an array buffer view\"));if(0===e.byteLength)return d(new TypeError(\"view must have non-zero byteLength\"));if(0===e.buffer.byteLength)return d(new TypeError(\"view's buffer must have non-zero byteLength\"));if(_le(e.buffer))return d(new TypeError(\"view's buffer has been detached\"));var r;try{r=function(e,t){var r;return L(e,t),{min:x(null!==(r=null==e?void 0:e.min)&&void 0!==r?r:1,\"\".concat(t,\" has member 'min' that\"))}}(t,\"options\")}catch(e){return d(e)}var o=r.min;if(0===o)return d(new TypeError(\"options.min must be greater than 0\"));if(function(e){return Re(e.constructor)}(e)){if(o>e.byteLength)return d(new RangeError(\"options.min must be less than or equal to view's byteLength\"))}else if(o>e.length)return d(new RangeError(\"options.min must be less than or equal to view's length\"));if(void 0===this._ownerReadableStream)return d(B(\"read from\"));var n,a;var i=u(function(e,t){n=e,a=t});return it(this,e,o,{_chunkSteps:function _chunkSteps(e){return n({value:e,done:!1})},_closeSteps:function _closeSteps(e){return n({value:e,done:!0})},_errorSteps:function _errorSteps(e){return a(e)}}),i}},{key:\"releaseLock\",value:function releaseLock(){if(!at(this))throw st(\"releaseLock\");void 0!==this._ownerReadableStream&&function(e){W(e);var t=new TypeError(\"Reader was released\");lt(e,t)}(this)}}])}();function at(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_readIntoRequests\")&&e instanceof ReadableStreamBYOBReader}function it(e,t,r,o){var n=e._ownerReadableStream;n._disturbed=!0,\"errored\"===n._state?o._errorSteps(n._storedError):Ie(n._readableStreamController,t,r,o)}function lt(e,t){var r=e._readIntoRequests;e._readIntoRequests=new v,r.forEach(function(e){e._errorSteps(t)})}function st(e){return new TypeError(\"ReadableStreamBYOBReader.prototype.\".concat(e,\" can only be used on a ReadableStreamBYOBReader\"))}function ut(e,t){var r=e.highWaterMark;if(void 0===r)return t;if(ye(r)||r<0)throw new RangeError(\"Invalid highWaterMark\");return r}function ct(e){var t=e.size;return t||function(){return 1}}function dt(e,t){L(e,t);var r=null==e?void 0:e.highWaterMark,o=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:Y(r),size:void 0===o?void 0:ft(o,\"\".concat(t,\" has member 'size' that\"))}}function ft(e,t){return F(e,t),function(t){return Y(e(t))}}function bt(e,t,r){return F(e,r),function(r){return g(e,t,[r])}}function ht(e,t,r){return F(e,r),function(){return g(e,t,[])}}function mt(e,t,r){return F(e,r),function(r){return S(e,t,[r])}}function _t(e,t,r){return F(e,r),function(r,o){return g(e,t,[r,o])}}function pt(e,t){if(!gt(e))throw new TypeError(\"\".concat(t,\" is not a WritableStream.\"))}Object.defineProperties(ReadableStreamBYOBReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),o(ReadableStreamBYOBReader.prototype.cancel,\"cancel\"),o(ReadableStreamBYOBReader.prototype.read,\"read\"),o(ReadableStreamBYOBReader.prototype.releaseLock,\"releaseLock\"),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(ReadableStreamBYOBReader.prototype,Symbol.toStringTag,{value:\"ReadableStreamBYOBReader\",configurable:!0});var WritableStream=function(){function WritableStream(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,WritableStream);void 0===e?e=null:I(e,\"First parameter\");var r=dt(t,\"Second parameter\"),o=function(e,t){L(e,t);var r=null==e?void 0:e.abort,o=null==e?void 0:e.close,n=null==e?void 0:e.start,a=null==e?void 0:e.type,i=null==e?void 0:e.write;return{abort:void 0===r?void 0:bt(r,e,\"\".concat(t,\" has member 'abort' that\")),close:void 0===o?void 0:ht(o,e,\"\".concat(t,\" has member 'close' that\")),start:void 0===n?void 0:mt(n,e,\"\".concat(t,\" has member 'start' that\")),write:void 0===i?void 0:_t(i,e,\"\".concat(t,\" has member 'write' that\")),type:a}}(e,\"First parameter\");St(this);if(void 0!==o.type)throw new RangeError(\"Invalid type is specified\");var n=ct(r);!function(e,t,r,o){var n=Object.create(WritableStreamDefaultController.prototype);var a,i,l,s;a=void 0!==t.start?function(){return t.start(n)}:function(){};i=void 0!==t.write?function(e){return t.write(e,n)}:function(){return c(void 0)};l=void 0!==t.close?function(){return t.close()}:function(){return c(void 0)};s=void 0!==t.abort?function(e){return t.abort(e)}:function(){return c(void 0)};Ft(e,n,a,i,l,s,r,o)}(this,o,ut(r,1),n)}return _createClass(WritableStream,[{key:\"locked\",get:function get(){if(!gt(this))throw Nt(\"locked\");return vt(this)}},{key:\"abort\",value:function abort(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;return gt(this)?vt(this)?d(new TypeError(\"Cannot abort a stream that already has a writer\")):wt(this,e):d(Nt(\"abort\"))}},{key:\"close\",value:function close(){return gt(this)?vt(this)?d(new TypeError(\"Cannot close a stream that already has a writer\")):qt(this)?d(new TypeError(\"Cannot close an already-closing stream\")):Rt(this):d(Nt(\"close\"))}},{key:\"getWriter\",value:function getWriter(){if(!gt(this))throw Nt(\"getWriter\");return yt(this)}}])}();function yt(e){return new WritableStreamDefaultWriter(e)}function St(e){e._state=\"writable\",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new v,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function gt(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_writableStreamController\")&&e instanceof WritableStream}function vt(e){return void 0!==e._writer}function wt(e,t){var r;if(\"closed\"===e._state||\"errored\"===e._state)return c(void 0);e._writableStreamController._abortReason=t,null===(r=e._writableStreamController._abortController)||void 0===r||r.abort(t);var o=e._state;if(\"closed\"===o||\"errored\"===o)return c(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;var n=!1;\"erroring\"===o&&(n=!0,t=void 0);var a=u(function(r,o){e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:o,_reason:t,_wasAlreadyErroring:n}});return e._pendingAbortRequest._promise=a,n||Ct(e,t),a}function Rt(e){var t=e._state;if(\"closed\"===t||\"errored\"===t)return d(new TypeError(\"The stream (in \".concat(t,\" state) is not in the writable state and cannot be closed\")));var r=u(function(t,r){var o={_resolve:t,_reject:r};e._closeRequest=o}),o=e._writer;var n;return void 0!==o&&e._backpressure&&\"writable\"===t&&or(o),ve(n=e._writableStreamController,Dt,0),Mt(n),r}function Tt(e,t){\"writable\"!==e._state?Pt(e):Ct(e,t)}function Ct(e,t){var r=e._writableStreamController;e._state=\"erroring\",e._storedError=t;var o=e._writer;void 0!==o&&kt(o,t),!function(e){if(void 0===e._inFlightWriteRequest&&void 0===e._inFlightCloseRequest)return!1;return!0}(e)&&r._started&&Pt(e)}function Pt(e){e._state=\"errored\",e._writableStreamController[R]();var t=e._storedError;if(e._writeRequests.forEach(function(e){e._reject(t)}),e._writeRequests=new v,void 0===e._pendingAbortRequest)return void Et(e);var r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void Et(e);b(e._writableStreamController[w](r._reason),function(){return r._resolve(),Et(e),null},function(t){return r._reject(t),Et(e),null})}function qt(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function Et(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var t=e._writer;void 0!==t&&Jt(t,e._storedError)}function Wt(e,t){var r=e._writer;void 0!==r&&t!==e._backpressure&&(t?function(e){Zt(e)}(r):or(r)),e._backpressure=t}Object.defineProperties(WritableStream.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),o(WritableStream.prototype.abort,\"abort\"),o(WritableStream.prototype.close,\"close\"),o(WritableStream.prototype.getWriter,\"getWriter\"),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(WritableStream.prototype,Symbol.toStringTag,{value:\"WritableStream\",configurable:!0});var WritableStreamDefaultWriter=function(){function WritableStreamDefaultWriter(e){_classCallCheck(this,WritableStreamDefaultWriter);if($(e,1,\"WritableStreamDefaultWriter\"),pt(e,\"First parameter\"),vt(e))throw new TypeError(\"This stream has already been locked for exclusive writing by another writer\");this._ownerWritableStream=e,e._writer=this;var t=e._state;if(\"writable\"===t)!qt(e)&&e._backpressure?Zt(this):tr(this),Gt(this);else if(\"erroring\"===t)er(this,e._storedError),Gt(this);else if(\"closed\"===t)tr(this),Gt(r=this),Kt(r);else{var _t13=e._storedError;er(this,_t13),Xt(this,_t13)}var r}return _createClass(WritableStreamDefaultWriter,[{key:\"closed\",get:function get(){return Bt(this)?this._closedPromise:d(Vt(\"closed\"))}},{key:\"desiredSize\",get:function get(){if(!Bt(this))throw Vt(\"desiredSize\");if(void 0===this._ownerWritableStream)throw Ut(\"desiredSize\");return function(e){var t=e._ownerWritableStream,r=t._state;if(\"errored\"===r||\"erroring\"===r)return null;if(\"closed\"===r)return 0;return $t(t._writableStreamController)}(this)}},{key:\"ready\",get:function get(){return Bt(this)?this._readyPromise:d(Vt(\"ready\"))}},{key:\"abort\",value:function abort(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;return Bt(this)?void 0===this._ownerWritableStream?d(Ut(\"abort\")):function(e,t){return wt(e._ownerWritableStream,t)}(this,e):d(Vt(\"abort\"))}},{key:\"close\",value:function close(){if(!Bt(this))return d(Vt(\"close\"));var e=this._ownerWritableStream;return void 0===e?d(Ut(\"close\")):qt(e)?d(new TypeError(\"Cannot close an already-closing stream\")):Ot(this)}},{key:\"releaseLock\",value:function releaseLock(){if(!Bt(this))throw Vt(\"releaseLock\");void 0!==this._ownerWritableStream&&At(this)}},{key:\"write\",value:function write(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;return Bt(this)?void 0===this._ownerWritableStream?d(Ut(\"write to\")):zt(this,e):d(Vt(\"write\"))}}])}();function Bt(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_ownerWritableStream\")&&e instanceof WritableStreamDefaultWriter}function Ot(e){return Rt(e._ownerWritableStream)}function jt(e,t){\"pending\"===e._closedPromiseState?Jt(e,t):function(e,t){Xt(e,t)}(e,t)}function kt(e,t){\"pending\"===e._readyPromiseState?rr(e,t):function(e,t){er(e,t)}(e,t)}function At(e){var t=e._ownerWritableStream,r=new TypeError(\"Writer was released and can no longer be used to monitor the stream's closedness\");kt(e,r),jt(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function zt(e,t){var r=e._ownerWritableStream,o=r._writableStreamController,n=function(e,t){if(void 0===e._strategySizeAlgorithm)return 1;try{return e._strategySizeAlgorithm(t)}catch(t){return Yt(e,t),1}}(o,t);if(r!==e._ownerWritableStream)return d(Ut(\"write to\"));var a=r._state;if(\"errored\"===a)return d(r._storedError);if(qt(r)||\"closed\"===a)return d(new TypeError(\"The stream is closing or closed and cannot be written to\"));if(\"erroring\"===a)return d(r._storedError);var i=function(e){return u(function(t,r){var o={_resolve:t,_reject:r};e._writeRequests.push(o)})}(r);return function(e,t,r){try{ve(e,t,r)}catch(t){return void Yt(e,t)}var o=e._controlledWritableStream;if(!qt(o)&&\"writable\"===o._state){Wt(o,Qt(e))}Mt(e)}(o,t,n),i}Object.defineProperties(WritableStreamDefaultWriter.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),o(WritableStreamDefaultWriter.prototype.abort,\"abort\"),o(WritableStreamDefaultWriter.prototype.close,\"close\"),o(WritableStreamDefaultWriter.prototype.releaseLock,\"releaseLock\"),o(WritableStreamDefaultWriter.prototype.write,\"write\"),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(WritableStreamDefaultWriter.prototype,Symbol.toStringTag,{value:\"WritableStreamDefaultWriter\",configurable:!0});var Dt={};var WritableStreamDefaultController=function(){function WritableStreamDefaultController(){_classCallCheck(this,WritableStreamDefaultController);throw new TypeError(\"Illegal constructor\")}return _createClass(WritableStreamDefaultController,[{key:\"abortReason\",get:function get(){if(!Lt(this))throw Ht(\"abortReason\");return this._abortReason}},{key:\"signal\",get:function get(){if(!Lt(this))throw Ht(\"signal\");if(void 0===this._abortController)throw new TypeError(\"WritableStreamDefaultController.prototype.signal is not supported\");return this._abortController.signal}},{key:\"error\",value:function error(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;if(!Lt(this))throw Ht(\"error\");\"writable\"===this._controlledWritableStream._state&&xt(this,e)}},{key:w,value:function value(e){var t=this._abortAlgorithm(e);return It(this),t}},{key:R,value:function value(){we(this)}}])}();function Lt(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_controlledWritableStream\")&&e instanceof WritableStreamDefaultController}function Ft(e,t,r,o,n,a,i,l){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,we(t),t._abortReason=void 0,t._abortController=function(){if(\"function\"==typeof AbortController)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=l,t._strategyHWM=i,t._writeAlgorithm=o,t._closeAlgorithm=n,t._abortAlgorithm=a;var s=Qt(t);Wt(e,s);b(c(r()),function(){return t._started=!0,Mt(t),null},function(r){return t._started=!0,Tt(e,r),null})}function It(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function $t(e){return e._strategyHWM-e._queueTotalSize}function Mt(e){var t=e._controlledWritableStream;if(!e._started)return;if(void 0!==t._inFlightWriteRequest)return;if(\"erroring\"===t._state)return void Pt(t);if(0===e._queue.length)return;var r=e._queue.peek().value;r===Dt?function(e){var t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),ge(e);var r=e._closeAlgorithm();It(e),b(r,function(){return function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,\"erroring\"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state=\"closed\";var t=e._writer;void 0!==t&&Kt(t)}(t),null},function(e){return function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),Tt(e,t)}(t,e),null})}(e):function(e,t){var r=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(r);var o=e._writeAlgorithm(t);b(o,function(){!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(r);var t=r._state;if(ge(e),!qt(r)&&\"writable\"===t){var _t14=Qt(e);Wt(r,_t14)}return Mt(e),null},function(t){return\"writable\"===r._state&&It(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,Tt(e,t)}(r,t),null})}(e,r)}function Yt(e,t){\"writable\"===e._controlledWritableStream._state&&xt(e,t)}function Qt(e){return $t(e)<=0}function xt(e,t){var r=e._controlledWritableStream;It(e),Ct(r,t)}function Nt(e){return new TypeError(\"WritableStream.prototype.\".concat(e,\" can only be used on a WritableStream\"))}function Ht(e){return new TypeError(\"WritableStreamDefaultController.prototype.\".concat(e,\" can only be used on a WritableStreamDefaultController\"))}function Vt(e){return new TypeError(\"WritableStreamDefaultWriter.prototype.\".concat(e,\" can only be used on a WritableStreamDefaultWriter\"))}function Ut(e){return new TypeError(\"Cannot \"+e+\" a stream using a released writer\")}function Gt(e){e._closedPromise=u(function(t,r){e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState=\"pending\"})}function Xt(e,t){Gt(e),Jt(e,t)}function Jt(e,t){void 0!==e._closedPromise_reject&&(p(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState=\"rejected\")}function Kt(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState=\"resolved\")}function Zt(e){e._readyPromise=u(function(t,r){e._readyPromise_resolve=t,e._readyPromise_reject=r}),e._readyPromiseState=\"pending\"}function er(e,t){Zt(e),rr(e,t)}function tr(e){Zt(e),or(e)}function rr(e,t){void 0!==e._readyPromise_reject&&(p(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState=\"rejected\")}function or(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState=\"fulfilled\")}Object.defineProperties(WritableStreamDefaultController.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(WritableStreamDefaultController.prototype,Symbol.toStringTag,{value:\"WritableStreamDefaultController\",configurable:!0});var nr=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof self?self:\"undefined\"!=typeof global?global:void 0;var ar=function(){var e=null==nr?void 0:nr.DOMException;return function(e){if(\"function\"!=typeof e&&\"object\"!=_typeof(e))return!1;if(\"DOMException\"!==e.name)return!1;try{return new e,!0}catch(e){return!1}}(e)?e:void 0}()||function(){var e=function e(_e5,t){this.message=_e5||\"\",this.name=t||\"Error\",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return o(e,\"DOMException\"),e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,\"constructor\",{value:e,writable:!0,configurable:!0}),e}();function ir(t,r,o,n,a,i){var l=H(t),s=yt(r);t._disturbed=!0;var _=!1,y=c(void 0);return u(function(S,g){var v;if(void 0!==i){if(v=function v(){var e=void 0!==i.reason?i.reason:new ar(\"Aborted\",\"AbortError\"),o=[];n||o.push(function(){return\"writable\"===r._state?wt(r,e):c(void 0)}),a||o.push(function(){return\"readable\"===t._state?Br(t,e):c(void 0)}),q(function(){return Promise.all(o.map(function(e){return e()}))},!0,e)},i.aborted)return void v();i.addEventListener(\"abort\",v)}var w,R,T;if(P(t,l._closedPromise,function(e){return n?E(!0,e):q(function(){return wt(r,e)},!0,e),null}),P(r,s._closedPromise,function(e){return a?E(!0,e):q(function(){return Br(t,e)},!0,e),null}),w=t,R=l._closedPromise,T=function T(){return o?E():q(function(){return function(e){var t=e._ownerWritableStream,r=t._state;return qt(t)||\"closed\"===r?c(void 0):\"errored\"===r?d(t._storedError):Ot(e)}(s)}),null},\"closed\"===w._state?T():h(R,T),qt(r)||\"closed\"===r._state){var _e6=new TypeError(\"the destination writable stream closed before all data could be piped to it\");a?E(!0,_e6):q(function(){return Br(t,_e6)},!0,_e6)}function C(){var e=y;return f(y,function(){return e!==y?C():void 0})}function P(e,t,r){\"errored\"===e._state?r(e._storedError):m(t,r)}function q(e,t,o){function n(){return b(e(),function(){return B(t,o)},function(e){return B(!0,e)}),null}_||(_=!0,\"writable\"!==r._state||qt(r)?n():h(C(),n))}function E(e,t){_||(_=!0,\"writable\"!==r._state||qt(r)?B(e,t):h(C(),function(){return B(e,t)}))}function B(e,t){return At(s),W(l),void 0!==i&&i.removeEventListener(\"abort\",v),e?g(t):S(void 0),null}p(u(function(t,r){!function o(n){n?t():f(_?c(!0):f(s._readyPromise,function(){return u(function(t,r){K(l,{_chunkSteps:function _chunkSteps(r){y=f(zt(s,r),void 0,e),t(!1)},_closeSteps:function _closeSteps(){return t(!0)},_errorSteps:r})})}),o,r)}(!1)}))})}var ReadableStreamDefaultController=function(){function ReadableStreamDefaultController(){_classCallCheck(this,ReadableStreamDefaultController);throw new TypeError(\"Illegal constructor\")}return _createClass(ReadableStreamDefaultController,[{key:\"desiredSize\",get:function get(){if(!lr(this))throw pr(\"desiredSize\");return hr(this)}},{key:\"close\",value:function close(){if(!lr(this))throw pr(\"close\");if(!mr(this))throw new TypeError(\"The stream is not in a state that permits close\");dr(this)}},{key:\"enqueue\",value:function enqueue(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;if(!lr(this))throw pr(\"enqueue\");if(!mr(this))throw new TypeError(\"The stream is not in a state that permits enqueue\");return fr(this,e)}},{key:\"error\",value:function error(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;if(!lr(this))throw pr(\"error\");br(this,e)}},{key:T,value:function value(e){we(this);var t=this._cancelAlgorithm(e);return cr(this),t}},{key:C,value:function value(e){var t=this._controlledReadableStream;if(this._queue.length>0){var _r8=ge(this);this._closeRequested&&0===this._queue.length?(cr(this),Or(t)):sr(this),e._chunkSteps(_r8)}else V(t,e),sr(this)}},{key:P,value:function value(){}}])}();function lr(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_controlledReadableStream\")&&e instanceof ReadableStreamDefaultController}function sr(e){if(!ur(e))return;if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0;b(e._pullAlgorithm(),function(){return e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,sr(e)),null},function(t){return br(e,t),null})}function ur(e){var t=e._controlledReadableStream;if(!mr(e))return!1;if(!e._started)return!1;if(Wr(t)&&G(t)>0)return!0;return hr(e)>0}function cr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function dr(e){if(!mr(e))return;var t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(cr(e),Or(t))}function fr(e,t){if(!mr(e))return;var r=e._controlledReadableStream;if(Wr(r)&&G(r)>0)U(r,t,!1);else{var _r9;try{_r9=e._strategySizeAlgorithm(t)}catch(t){throw br(e,t),t}try{ve(e,t,_r9)}catch(t){throw br(e,t),t}}sr(e)}function br(e,t){var r=e._controlledReadableStream;\"readable\"===r._state&&(we(e),cr(e),jr(r,t))}function hr(e){var t=e._controlledReadableStream._state;return\"errored\"===t?null:\"closed\"===t?0:e._strategyHWM-e._queueTotalSize}function mr(e){var t=e._controlledReadableStream._state;return!e._closeRequested&&\"readable\"===t}function _r(e,t,r,o,n,a,i){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,we(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=i,t._strategyHWM=a,t._pullAlgorithm=o,t._cancelAlgorithm=n,e._readableStreamController=t;b(c(r()),function(){return t._started=!0,sr(t),null},function(e){return br(t,e),null})}function pr(e){return new TypeError(\"ReadableStreamDefaultController.prototype.\".concat(e,\" can only be used on a ReadableStreamDefaultController\"))}function yr(e,t){return Te(e._readableStreamController)?function(e){var t,r,o,n,a,i=H(e),l=!1,s=!1,d=!1,f=!1,b=!1;var h=u(function(e){a=e});function _(e){m(e._closedPromise,function(t){return e!==i||(Ne(o._readableStreamController,t),Ne(n._readableStreamController,t),f&&b||a(void 0)),null})}function p(){at(i)&&(W(i),i=H(e),_(i));K(i,{_chunkSteps:function _chunkSteps(t){_y(function(){s=!1,d=!1;var r=t;var i=t;if(!f&&!b)try{i=Se(t)}catch(t){return Ne(o._readableStreamController,t),Ne(n._readableStreamController,t),void a(Br(e,t))}f||xe(o._readableStreamController,r),b||xe(n._readableStreamController,i),l=!1,s?g():d&&v()})},_closeSteps:function _closeSteps(){l=!1,f||Qe(o._readableStreamController),b||Qe(n._readableStreamController),o._readableStreamController._pendingPullIntos.length>0&&Ge(o._readableStreamController,0),n._readableStreamController._pendingPullIntos.length>0&&Ge(n._readableStreamController,0),f&&b||a(void 0)},_errorSteps:function _errorSteps(){l=!1}})}function S(t,r){J(i)&&(W(i),i=tt(e),_(i));var u=r?n:o,c=r?o:n;it(i,t,1,{_chunkSteps:function _chunkSteps(t){_y(function(){s=!1,d=!1;var o=r?b:f;if(r?f:b)o||Xe(u._readableStreamController,t);else{var _r0;try{_r0=Se(t)}catch(t){return Ne(u._readableStreamController,t),Ne(c._readableStreamController,t),void a(Br(e,t))}o||Xe(u._readableStreamController,t),xe(c._readableStreamController,_r0)}l=!1,s?g():d&&v()})},_closeSteps:function _closeSteps(e){l=!1;var t=r?b:f,o=r?f:b;t||Qe(u._readableStreamController),o||Qe(c._readableStreamController),void 0!==e&&(t||Xe(u._readableStreamController,e),!o&&c._readableStreamController._pendingPullIntos.length>0&&Ge(c._readableStreamController,0)),t&&o||a(void 0)},_errorSteps:function _errorSteps(){l=!1}})}function g(){if(l)return s=!0,c(void 0);l=!0;var e=Ve(o._readableStreamController);return null===e?p():S(e._view,!1),c(void 0)}function v(){if(l)return d=!0,c(void 0);l=!0;var e=Ve(n._readableStreamController);return null===e?p():S(e._view,!0),c(void 0)}function w(o){if(f=!0,t=o,b){var _o5=ne([t,r]),_n=Br(e,_o5);a(_n)}return h}function R(o){if(b=!0,r=o,f){var _o6=ne([t,r]),_n2=Br(e,_o6);a(_n2)}return h}function T(){}return o=Pr(T,g,w),n=Pr(T,v,R),_(i),[o,n]}(e):function(e,t){var r=H(e);var o,n,a,i,l,s=!1,d=!1,f=!1,b=!1;var h=u(function(e){l=e});function _(){if(s)return d=!0,c(void 0);s=!0;return K(r,{_chunkSteps:function _chunkSteps(e){_y(function(){d=!1;var t=e,r=e;f||fr(a._readableStreamController,t),b||fr(i._readableStreamController,r),s=!1,d&&_()})},_closeSteps:function _closeSteps(){s=!1,f||dr(a._readableStreamController),b||dr(i._readableStreamController),f&&b||l(void 0)},_errorSteps:function _errorSteps(){s=!1}}),c(void 0)}function p(t){if(f=!0,o=t,b){var _t15=ne([o,n]),_r1=Br(e,_t15);l(_r1)}return h}function S(t){if(b=!0,n=t,f){var _t16=ne([o,n]),_r10=Br(e,_t16);l(_r10)}return h}function g(){}return a=Cr(g,_,p),i=Cr(g,_,S),m(r._closedPromise,function(e){return br(a._readableStreamController,e),br(i._readableStreamController,e),f&&b||l(void 0),null}),[a,i]}(e)}function Sr(r){return t(o=r)&&void 0!==o.getReader?function(r){var o;function n(){var e;try{e=r.read()}catch(e){return d(e)}return _(e,function(e){if(!t(e))throw new TypeError(\"The promise returned by the reader.read() method must fulfill with an object\");if(e.done)dr(o._readableStreamController);else{var _t17=e.value;fr(o._readableStreamController,_t17)}})}function a(e){try{return c(r.cancel(e))}catch(e){return d(e)}}return o=Cr(e,n,a,0),o}(r.getReader()):function(r){var o;var n=fe(r,\"async\");function a(){var e;try{e=be(n)}catch(e){return d(e)}return _(c(e),function(e){if(!t(e))throw new TypeError(\"The promise returned by the iterator.next() method must fulfill with an object\");if(e.done)dr(o._readableStreamController);else{var _t18=e.value;fr(o._readableStreamController,_t18)}})}function i(e){var r=n.iterator;var o;try{o=ue(r,\"return\")}catch(e){return d(e)}if(void 0===o)return c(void 0);return _(g(o,r,[e]),function(e){if(!t(e))throw new TypeError(\"The promise returned by the iterator.return() method must fulfill with an object\")})}return o=Cr(e,a,i,0),o}(r);var o}function gr(e,t,r){return F(e,r),function(r){return g(e,t,[r])}}function vr(e,t,r){return F(e,r),function(r){return g(e,t,[r])}}function wr(e,t,r){return F(e,r),function(r){return S(e,t,[r])}}function Rr(e,t){if(\"bytes\"!==(e=\"\".concat(e)))throw new TypeError(\"\".concat(t,\" '\").concat(e,\"' is not a valid enumeration value for ReadableStreamType\"));return e}function Tr(e,t){L(e,t);var r=null==e?void 0:e.preventAbort,o=null==e?void 0:e.preventCancel,n=null==e?void 0:e.preventClose,a=null==e?void 0:e.signal;return void 0!==a&&function(e,t){if(!function(e){if(\"object\"!=_typeof(e)||null===e)return!1;try{return\"boolean\"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(\"\".concat(t,\" is not an AbortSignal.\"))}(a,\"\".concat(t,\" has member 'signal' that\")),{preventAbort:Boolean(r),preventCancel:Boolean(o),preventClose:Boolean(n),signal:a}}Object.defineProperties(ReadableStreamDefaultController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),o(ReadableStreamDefaultController.prototype.close,\"close\"),o(ReadableStreamDefaultController.prototype.enqueue,\"enqueue\"),o(ReadableStreamDefaultController.prototype.error,\"error\"),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(ReadableStreamDefaultController.prototype,Symbol.toStringTag,{value:\"ReadableStreamDefaultController\",configurable:!0});var ReadableStream=function(){function ReadableStream(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,ReadableStream);void 0===e?e=null:I(e,\"First parameter\");var r=dt(t,\"Second parameter\"),o=function(e,t){L(e,t);var r=e,o=null==r?void 0:r.autoAllocateChunkSize,n=null==r?void 0:r.cancel,a=null==r?void 0:r.pull,i=null==r?void 0:r.start,l=null==r?void 0:r.type;return{autoAllocateChunkSize:void 0===o?void 0:x(o,\"\".concat(t,\" has member 'autoAllocateChunkSize' that\")),cancel:void 0===n?void 0:gr(n,r,\"\".concat(t,\" has member 'cancel' that\")),pull:void 0===a?void 0:vr(a,r,\"\".concat(t,\" has member 'pull' that\")),start:void 0===i?void 0:wr(i,r,\"\".concat(t,\" has member 'start' that\")),type:void 0===l?void 0:Rr(l,\"\".concat(t,\" has member 'type' that\"))}}(e,\"First parameter\");if(qr(this),\"bytes\"===o.type){if(void 0!==r.size)throw new RangeError(\"The strategy for a byte stream cannot have a size function\");!function(e,t,r){var o=Object.create(ReadableByteStreamController.prototype);var n,a,i;n=void 0!==t.start?function(){return t.start(o)}:function(){},a=void 0!==t.pull?function(){return t.pull(o)}:function(){return c(void 0)},i=void 0!==t.cancel?function(e){return t.cancel(e)}:function(){return c(void 0)};var l=t.autoAllocateChunkSize;if(0===l)throw new TypeError(\"autoAllocateChunkSize must be greater than 0\");Je(e,o,n,a,i,r,l)}(this,o,ut(r,0))}else{var _e7=ct(r);!function(e,t,r,o){var n=Object.create(ReadableStreamDefaultController.prototype);var a,i,l;a=void 0!==t.start?function(){return t.start(n)}:function(){},i=void 0!==t.pull?function(){return t.pull(n)}:function(){return c(void 0)},l=void 0!==t.cancel?function(e){return t.cancel(e)}:function(){return c(void 0)},_r(e,n,a,i,l,r,o)}(this,o,ut(r,1),_e7)}}return _createClass(ReadableStream,[{key:\"locked\",get:function get(){if(!Er(this))throw kr(\"locked\");return Wr(this)}},{key:\"cancel\",value:function cancel(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;return Er(this)?Wr(this)?d(new TypeError(\"Cannot cancel a stream that already has a reader\")):Br(this,e):d(kr(\"cancel\"))}},{key:\"getReader\",value:function getReader(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;if(!Er(this))throw kr(\"getReader\");return void 0===function(e,t){L(e,t);var r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:et(r,\"\".concat(t,\" has member 'mode' that\"))}}(e,\"First parameter\").mode?H(this):tt(this)}},{key:\"pipeThrough\",value:function pipeThrough(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!Er(this))throw kr(\"pipeThrough\");$(e,1,\"pipeThrough\");var r=function(e,t){L(e,t);var r=null==e?void 0:e.readable;M(r,\"readable\",\"ReadableWritablePair\"),N(r,\"\".concat(t,\" has member 'readable' that\"));var o=null==e?void 0:e.writable;return M(o,\"writable\",\"ReadableWritablePair\"),pt(o,\"\".concat(t,\" has member 'writable' that\")),{readable:r,writable:o}}(e,\"First parameter\"),o=Tr(t,\"Second parameter\");if(Wr(this))throw new TypeError(\"ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream\");if(vt(r.writable))throw new TypeError(\"ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream\");return p(ir(this,r.writable,o.preventClose,o.preventAbort,o.preventCancel,o.signal)),r.readable}},{key:\"pipeTo\",value:function pipeTo(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!Er(this))return d(kr(\"pipeTo\"));if(void 0===e)return d(\"Parameter 1 is required in 'pipeTo'.\");if(!gt(e))return d(new TypeError(\"ReadableStream.prototype.pipeTo's first argument must be a WritableStream\"));var r;try{r=Tr(t,\"Second parameter\")}catch(e){return d(e)}return Wr(this)?d(new TypeError(\"ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream\")):vt(e)?d(new TypeError(\"ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream\")):ir(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}},{key:\"tee\",value:function tee(){if(!Er(this))throw kr(\"tee\");return ne(yr(this))}},{key:\"values\",value:function values(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;if(!Er(this))throw kr(\"values\");return function(e,t){var r=H(e),o=new he(r,t),n=Object.create(me);return n._asyncIteratorImpl=o,n}(this,function(e,t){L(e,t);var r=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(r)}}(e,\"First parameter\").preventCancel)}},{key:de,value:function value(e){return this.values(e)}}],[{key:\"from\",value:function from(e){return Sr(e)}}])}();function Cr(e,t,r){var o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:function(){return 1};var a=Object.create(ReadableStream.prototype);qr(a);return _r(a,Object.create(ReadableStreamDefaultController.prototype),e,t,r,o,n),a}function Pr(e,t,r){var o=Object.create(ReadableStream.prototype);qr(o);return Je(o,Object.create(ReadableByteStreamController.prototype),e,t,r,0,void 0),o}function qr(e){e._state=\"readable\",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Er(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_readableStreamController\")&&e instanceof ReadableStream}function Wr(e){return void 0!==e._reader}function Br(t,r){if(t._disturbed=!0,\"closed\"===t._state)return c(void 0);if(\"errored\"===t._state)return d(t._storedError);Or(t);var o=t._reader;if(void 0!==o&&at(o)){var _e8=o._readIntoRequests;o._readIntoRequests=new v,_e8.forEach(function(e){e._closeSteps(void 0)})}return _(t._readableStreamController[T](r),e)}function Or(e){e._state=\"closed\";var t=e._reader;if(void 0!==t&&(A(t),J(t))){var _e9=t._readRequests;t._readRequests=new v,_e9.forEach(function(e){e._closeSteps()})}}function jr(e,t){e._state=\"errored\",e._storedError=t;var r=e._reader;void 0!==r&&(k(r,t),J(r)?Z(r,t):lt(r,t))}function kr(e){return new TypeError(\"ReadableStream.prototype.\".concat(e,\" can only be used on a ReadableStream\"))}function Ar(e,t){L(e,t);var r=null==e?void 0:e.highWaterMark;return M(r,\"highWaterMark\",\"QueuingStrategyInit\"),{highWaterMark:Y(r)}}Object.defineProperties(ReadableStream,{from:{enumerable:!0}}),Object.defineProperties(ReadableStream.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),o(ReadableStream.from,\"from\"),o(ReadableStream.prototype.cancel,\"cancel\"),o(ReadableStream.prototype.getReader,\"getReader\"),o(ReadableStream.prototype.pipeThrough,\"pipeThrough\"),o(ReadableStream.prototype.pipeTo,\"pipeTo\"),o(ReadableStream.prototype.tee,\"tee\"),o(ReadableStream.prototype.values,\"values\"),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(ReadableStream.prototype,Symbol.toStringTag,{value:\"ReadableStream\",configurable:!0}),Object.defineProperty(ReadableStream.prototype,de,{value:ReadableStream.prototype.values,writable:!0,configurable:!0});var zr=function zr(e){return e.byteLength};o(zr,\"size\");var ByteLengthQueuingStrategy=function(){function ByteLengthQueuingStrategy(e){_classCallCheck(this,ByteLengthQueuingStrategy);$(e,1,\"ByteLengthQueuingStrategy\"),e=Ar(e,\"First parameter\"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}return _createClass(ByteLengthQueuingStrategy,[{key:\"highWaterMark\",get:function get(){if(!Lr(this))throw Dr(\"highWaterMark\");return this._byteLengthQueuingStrategyHighWaterMark}},{key:\"size\",get:function get(){if(!Lr(this))throw Dr(\"size\");return zr}}])}();function Dr(e){return new TypeError(\"ByteLengthQueuingStrategy.prototype.\".concat(e,\" can only be used on a ByteLengthQueuingStrategy\"))}function Lr(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_byteLengthQueuingStrategyHighWaterMark\")&&e instanceof ByteLengthQueuingStrategy}Object.defineProperties(ByteLengthQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(ByteLengthQueuingStrategy.prototype,Symbol.toStringTag,{value:\"ByteLengthQueuingStrategy\",configurable:!0});var Fr=function Fr(){return 1};o(Fr,\"size\");var CountQueuingStrategy=function(){function CountQueuingStrategy(e){_classCallCheck(this,CountQueuingStrategy);$(e,1,\"CountQueuingStrategy\"),e=Ar(e,\"First parameter\"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}return _createClass(CountQueuingStrategy,[{key:\"highWaterMark\",get:function get(){if(!$r(this))throw Ir(\"highWaterMark\");return this._countQueuingStrategyHighWaterMark}},{key:\"size\",get:function get(){if(!$r(this))throw Ir(\"size\");return Fr}}])}();function Ir(e){return new TypeError(\"CountQueuingStrategy.prototype.\".concat(e,\" can only be used on a CountQueuingStrategy\"))}function $r(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_countQueuingStrategyHighWaterMark\")&&e instanceof CountQueuingStrategy}function Mr(e,t,r){return F(e,r),function(r){return g(e,t,[r])}}function Yr(e,t,r){return F(e,r),function(r){return S(e,t,[r])}}function Qr(e,t,r){return F(e,r),function(r,o){return g(e,t,[r,o])}}function xr(e,t,r){return F(e,r),function(r){return g(e,t,[r])}}Object.defineProperties(CountQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(CountQueuingStrategy.prototype,Symbol.toStringTag,{value:\"CountQueuingStrategy\",configurable:!0});var TransformStream=function(){function TransformStream(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,TransformStream);void 0===e&&(e=null);var o=dt(t,\"Second parameter\"),n=dt(r,\"Third parameter\"),a=function(e,t){L(e,t);var r=null==e?void 0:e.cancel,o=null==e?void 0:e.flush,n=null==e?void 0:e.readableType,a=null==e?void 0:e.start,i=null==e?void 0:e.transform,l=null==e?void 0:e.writableType;return{cancel:void 0===r?void 0:xr(r,e,\"\".concat(t,\" has member 'cancel' that\")),flush:void 0===o?void 0:Mr(o,e,\"\".concat(t,\" has member 'flush' that\")),readableType:n,start:void 0===a?void 0:Yr(a,e,\"\".concat(t,\" has member 'start' that\")),transform:void 0===i?void 0:Qr(i,e,\"\".concat(t,\" has member 'transform' that\")),writableType:l}}(e,\"First parameter\");if(void 0!==a.readableType)throw new RangeError(\"Invalid readableType specified\");if(void 0!==a.writableType)throw new RangeError(\"Invalid writableType specified\");var i=ut(n,0),l=ct(n),s=ut(o,1),f=ct(o);var h;!function(e,t,r,o,n,a){function i(){return t}function l(t){return function(e,t){var r=e._transformStreamController;if(e._backpressure){return _(e._backpressureChangePromise,function(){var o=e._writable;if(\"erroring\"===o._state)throw o._storedError;return Zr(r,t)})}return Zr(r,t)}(e,t)}function s(t){return function(e,t){var r=e._transformStreamController;if(void 0!==r._finishPromise)return r._finishPromise;var o=e._readable;r._finishPromise=u(function(e,t){r._finishPromise_resolve=e,r._finishPromise_reject=t});var n=r._cancelAlgorithm(t);return Jr(r),b(n,function(){return\"errored\"===o._state?ro(r,o._storedError):(br(o._readableStreamController,t),to(r)),null},function(e){return br(o._readableStreamController,e),ro(r,e),null}),r._finishPromise}(e,t)}function c(){return function(e){var t=e._transformStreamController;if(void 0!==t._finishPromise)return t._finishPromise;var r=e._readable;t._finishPromise=u(function(e,r){t._finishPromise_resolve=e,t._finishPromise_reject=r});var o=t._flushAlgorithm();return Jr(t),b(o,function(){return\"errored\"===r._state?ro(t,r._storedError):(dr(r._readableStreamController),to(t)),null},function(e){return br(r._readableStreamController,e),ro(t,e),null}),t._finishPromise}(e)}function d(){return function(e){return Gr(e,!1),e._backpressureChangePromise}(e)}function f(t){return function(e,t){var r=e._transformStreamController;if(void 0!==r._finishPromise)return r._finishPromise;var o=e._writable;r._finishPromise=u(function(e,t){r._finishPromise_resolve=e,r._finishPromise_reject=t});var n=r._cancelAlgorithm(t);return Jr(r),b(n,function(){return\"errored\"===o._state?ro(r,o._storedError):(Yt(o._writableStreamController,t),Ur(e),to(r)),null},function(t){return Yt(o._writableStreamController,t),Ur(e),ro(r,t),null}),r._finishPromise}(e,t)}e._writable=function(e,t,r,o){var n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:function(){return 1};var i=Object.create(WritableStream.prototype);return St(i),Ft(i,Object.create(WritableStreamDefaultController.prototype),e,t,r,o,n,a),i}(i,l,c,s,r,o),e._readable=Cr(i,d,f,n,a),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Gr(e,!0),e._transformStreamController=void 0}(this,u(function(e){h=e}),s,f,i,l),function(e,t){var r=Object.create(TransformStreamDefaultController.prototype);var o,n,a;o=void 0!==t.transform?function(e){return t.transform(e,r)}:function(e){try{return Kr(r,e),c(void 0)}catch(e){return d(e)}};n=void 0!==t.flush?function(){return t.flush(r)}:function(){return c(void 0)};a=void 0!==t.cancel?function(e){return t.cancel(e)}:function(){return c(void 0)};!function(e,t,r,o,n){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=r,t._flushAlgorithm=o,t._cancelAlgorithm=n,t._finishPromise=void 0,t._finishPromise_resolve=void 0,t._finishPromise_reject=void 0}(e,r,o,n,a)}(this,a),void 0!==a.start?h(a.start(this._transformStreamController)):h(void 0)}return _createClass(TransformStream,[{key:\"readable\",get:function get(){if(!Nr(this))throw oo(\"readable\");return this._readable}},{key:\"writable\",get:function get(){if(!Nr(this))throw oo(\"writable\");return this._writable}}])}();function Nr(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_transformStreamController\")&&e instanceof TransformStream}function Hr(e,t){br(e._readable._readableStreamController,t),Vr(e,t)}function Vr(e,t){Jr(e._transformStreamController),Yt(e._writable._writableStreamController,t),Ur(e)}function Ur(e){e._backpressure&&Gr(e,!1)}function Gr(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=u(function(t){e._backpressureChangePromise_resolve=t}),e._backpressure=t}Object.defineProperties(TransformStream.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(TransformStream.prototype,Symbol.toStringTag,{value:\"TransformStream\",configurable:!0});var TransformStreamDefaultController=function(){function TransformStreamDefaultController(){_classCallCheck(this,TransformStreamDefaultController);throw new TypeError(\"Illegal constructor\")}return _createClass(TransformStreamDefaultController,[{key:\"desiredSize\",get:function get(){if(!Xr(this))throw eo(\"desiredSize\");return hr(this._controlledTransformStream._readable._readableStreamController)}},{key:\"enqueue\",value:function enqueue(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;if(!Xr(this))throw eo(\"enqueue\");Kr(this,e)}},{key:\"error\",value:function error(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:void 0;if(!Xr(this))throw eo(\"error\");var t;t=e,Hr(this._controlledTransformStream,t)}},{key:\"terminate\",value:function terminate(){if(!Xr(this))throw eo(\"terminate\");!function(e){var t=e._controlledTransformStream;dr(t._readable._readableStreamController);var r=new TypeError(\"TransformStream terminated\");Vr(t,r)}(this)}}])}();function Xr(e){return!!t(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_controlledTransformStream\")&&e instanceof TransformStreamDefaultController}function Jr(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0,e._cancelAlgorithm=void 0}function Kr(e,t){var r=e._controlledTransformStream,o=r._readable._readableStreamController;if(!mr(o))throw new TypeError(\"Readable side is not in a state that permits enqueue\");try{fr(o,t)}catch(e){throw Vr(r,e),r._readable._storedError}var n=function(e){return!ur(e)}(o);n!==r._backpressure&&Gr(r,!0)}function Zr(e,t){return _(e._transformAlgorithm(t),void 0,function(t){throw Hr(e._controlledTransformStream,t),t})}function eo(e){return new TypeError(\"TransformStreamDefaultController.prototype.\".concat(e,\" can only be used on a TransformStreamDefaultController\"))}function to(e){void 0!==e._finishPromise_resolve&&(e._finishPromise_resolve(),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function ro(e,t){void 0!==e._finishPromise_reject&&(p(e._finishPromise),e._finishPromise_reject(t),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function oo(e){return new TypeError(\"TransformStream.prototype.\".concat(e,\" can only be used on a TransformStream\"))}Object.defineProperties(TransformStreamDefaultController.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),o(TransformStreamDefaultController.prototype.enqueue,\"enqueue\"),o(TransformStreamDefaultController.prototype.error,\"error\"),o(TransformStreamDefaultController.prototype.terminate,\"terminate\"),\"symbol\"==_typeof(Symbol.toStringTag)&&Object.defineProperty(TransformStreamDefaultController.prototype,Symbol.toStringTag,{value:\"TransformStreamDefaultController\",configurable:!0});var no={ReadableStream:ReadableStream,ReadableStreamDefaultController:ReadableStreamDefaultController,ReadableByteStreamController:ReadableByteStreamController,ReadableStreamBYOBRequest:ReadableStreamBYOBRequest,ReadableStreamDefaultReader:ReadableStreamDefaultReader,ReadableStreamBYOBReader:ReadableStreamBYOBReader,WritableStream:WritableStream,WritableStreamDefaultController:WritableStreamDefaultController,WritableStreamDefaultWriter:WritableStreamDefaultWriter,ByteLengthQueuingStrategy:ByteLengthQueuingStrategy,CountQueuingStrategy:CountQueuingStrategy,TransformStream:TransformStream,TransformStreamDefaultController:TransformStreamDefaultController};for(var _e0 in no)Object.prototype.hasOwnProperty.call(no,_e0)&&Object.defineProperty(nr,_e0,{value:no[_e0],writable:!0,configurable:!0})}();";

// Polyfill scripts for iOS < 15.4
static NSString *scripts_before_15_4 = @"\
\"use strict\";function _typeof(o){\"@babel/helpers - typeof\";return _typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&\"function\"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?\"symbol\":typeof o},_typeof(o)}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function _callSuper(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e))}function _possibleConstructorReturn(t,e){if(e&&(\"object\"==_typeof(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return _assertThisInitialized(t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function _inherits(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&_setPrototypeOf(t,e)}function _wrapNativeSuper(t){var r=\"function\"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!_isNativeFunction(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,Wrapper)}function Wrapper(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,t)},_wrapNativeSuper(t)}function _construct(t,e,r){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,e);var p=new(t.bind.apply(t,o));return r&&_setPrototypeOf(p,r.prototype),p}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _isNativeFunction(t){try{return-1!==Function.toString.call(t).indexOf(\"[native code]\")}catch(n){return\"function\"==typeof t}}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toPropertyKey(t){var i=_toPrimitive(t,\"string\");return\"symbol\"==_typeof(i)?i:i+\"\"}function _toPrimitive(t,r){if(\"object\"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||\"default\");if(\"object\"!=_typeof(i))return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===r?String:Number)(t)}if(!Array.prototype.at){Object.defineProperty(Array.prototype,\"at\",{value:function value(index){if(index<0)index=this.length+index;if(index>=0&&index<this.length)return this[index];return undefined},writable:true,configurable:true})}if(!Array.prototype.findLast){Object.defineProperty(Array.prototype,\"findLast\",{value:function value(callback,thisArg){if(this==null){throw new TypeError(\"Array.prototype.findLast called on null or undefined\")}if(typeof callback!==\"function\"){throw new TypeError(\"callback must be a function\")}var array=Object(this);var length=array.length>>>0;for(var i=length-1;i>=0;i--){if(i in array&&callback.call(thisArg,array[i],i,array)){return array[i]}}return undefined},writable:true,configurable:true})}if(!Array.prototype.findLastIndex){Object.defineProperty(Array.prototype,\"findLastIndex\",{value:function value(callback,thisArg){if(this==null){throw new TypeError(\"Array.prototype.findLastIndex called on null or undefined\")}if(typeof callback!==\"function\"){throw new TypeError(\"callback must be a function\")}var array=Object(this);var length=array.length>>>0;for(var i=length-1;i>=0;i--){if(i in array&&callback.call(thisArg,array[i],i,array)){return i}}return-1},writable:true,configurable:true})}(function(context){var _channels=null;var _tabId=null;var _prefix=\"polyBC_\";var getRandomString=function getRandomString(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:5;var text=\"\";var possible=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";for(var i=0;i<len;i++){text+=possible.charAt(Math.floor(Math.random()*possible.length))}return text};var isEmpty=function isEmpty(obj){return!Object.keys(obj).length};var getTimestamp=function getTimestamp(){return(new Date).getTime()};var buildResponse=function buildResponse(data){return{timestamp:getTimestamp(),isTrusted:true,target:null,currentTarget:null,data:data,bubbles:false,cancelable:false,defaultPrevented:false,lastEventId:\"\",origin:context.location.origin}};var _onmsg=function _onmsg(ev){var key=ev.key;var newValue=ev.newValue;var isRemoved=!newValue;var obj=null;if(key.indexOf(\"\".concat(_prefix,\"message_\"))>-1&&!isRemoved){try{obj=JSON.parse(newValue)}catch(ex){throw\"Message conversion has resulted in an error.\"}if(obj.tabId!==_tabId&&obj.channelId&&_channels&&_channels[obj.channelId]){var subscribers=_channels[obj.channelId];subscribers.forEach(function(sub){if(!sub.closed){var event=new CustomEvent(\"message\",obj.message);sub.dispatchEvent(event)}});context.localStorage.removeItem(key)}}};var _BroadcastChannel=function(_EventTarget){function _BroadcastChannel(){var _this;var channelName=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";_classCallCheck(this,_BroadcastChannel);_this=_callSuper(this,_BroadcastChannel);_defineProperty(_this,\"channelId\",\"\");_defineProperty(_this,\"channelName\",\"\");_defineProperty(_this,\"name\",\"\");_defineProperty(_this,\"closed\",false);_this.channelName=channelName;if(!context.localStorage){throw\"localStorage not available\"}var _channelId=_prefix+channelName;var isFirstChannel=_channels===null;_this.channelId=_channelId;_tabId=_tabId||getRandomString();_channels=_channels||{};_channels[_channelId]=_channels[_channelId]||[];_channels[_channelId].push(_this);_this.name=_channelId+\"::::\"+getRandomString()+getTimestamp();if(isFirstChannel){context.addEventListener(\"storage\",_onmsg.bind(_this),false)}return _this}_inherits(_BroadcastChannel,_EventTarget);return _createClass(_BroadcastChannel,[{key:\"postMessage\",value:function postMessage(data){var _this2=this;if(!_channels)return;if(this.closed){throw\"This BroadcastChannel is closed.\"}var msgObj=buildResponse(data);var subscribers=_channels[this.channelId]||[];subscribers.forEach(function(sub){if(sub.closed||sub.name===_this2.name)return;var event=new CustomEvent(\"message\",msgObj);sub.dispatchEvent(event)});var editedObj={channelId:this.channelId,bcId:this.name,tabId:_tabId,message:msgObj};try{var editedJSON=JSON.stringify(editedObj);var lsKey=\"\".concat(_prefix,\"message_\").concat(getRandomString(),\"_\").concat(this.channelId);context.localStorage.setItem(lsKey,editedJSON);setTimeout(function(){return context.localStorage.removeItem(lsKey)},1e3)}catch(ex){throw\"Message conversion has resulted in an error.\"}}},{key:\"close\",value:function close(){this.closed=true;var subscribers=_channels[this.channelId];var index=subscribers.indexOf(this);if(index>-1){subscribers.splice(index,1)}if(!subscribers.length){delete _channels[this.channelId]}if(isEmpty(_channels)){context.removeEventListener(\"storage\",_onmsg.bind(this))}}}])}(_wrapNativeSuper(EventTarget));context.BroadcastChannel=context.BroadcastChannel||_BroadcastChannel})(window.top);if(!crypto)require(\"crypto\");crypto.randomUUID=crypto.randomUUID||function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(c){return(c^crypto.getRandomValues(new Uint8Array(1))[0]&15>>c/4).toString(16)})};HTMLDialogElement=String;if(!Element.prototype._originalMatches){Element.prototype._originalMatches=Element.prototype.matches;Element.prototype.matches=function(selector){var modifiedSelector=selector.replace(/:modal/g,\".modal\");return Element.prototype._originalMatches.call(this,modifiedSelector)}}if(!(\"hasOwn\"in Object)){Object.hasOwn=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}";

// Polyfill scripts for iOS < 13.1
static NSString *scripts_before_13_1 = @"\
\"use strict\";String.prototype.replaceAll=String.prototype.replaceAll||function(str,newStr){if(Object.prototype.toString.call(str).toLowerCase()===\"[object regexp]\")return this.replace(str,newStr);return this.replace(new RegExp(str,\"g\"),newStr)};";

// Polyfill scripts for iOS < 13.0
static NSString *scripts_before_13_0 = @"\
\"use strict\";Promise.allSettled=Promise.allSettled||function(promises){return Promise.all(promises.map(function(p){return p.then(function(value){return{status:\"fulfilled\",value:value}})[\"catch\"](function(reason){return{status:\"rejected\",reason:reason}})}))};";

// Polyfill scripts for iOS < 16.0
static NSString *scripts_before_16_0 = @"\
\"use strict\";if(!Array.prototype.toReversed){Object.defineProperty(Array.prototype,\"toReversed\",{value:function value(){for(var i=this.length-1,arr=[];i>=0;--i){arr.push(this[i])}return arr},writable:true,configurable:true})}";

// Polyfill scripts for iOS < 9.0
static NSString *scripts_before_9_0 = @"\
\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.endsWith=endsWith;exports.startsWith=startsWith;if(!Array.from){Array.from=function(){var iteratorTypes=[\"[object Map Iterator]\",\"[object Set Iterator]\",\"[object WeakMap Iterator]\",\"[object WeakSet Iterator]\"];var toStr=Object.prototype.toString;var isCallable=function isCallable(fn){return typeof fn===\"function\"||toStr.call(fn)===\"[object Function]\"};var toInteger=function toInteger(value){var number=Number(value);if(isNaN(number)){return 0}if(number===0||!isFinite(number)){return number}return(number>0?1:-1)*Math.floor(Math.abs(number))};var maxSafeInteger=Math.pow(2,53)-1;var toLength=function toLength(value){var len=toInteger(value);return Math.min(Math.max(len,0),maxSafeInteger)};return function from(arrayLike){var iteratee=function iteratee(item,k){if(mapFn){A[k]=typeof T===\"undefined\"?mapFn(item,k):mapFn.call(T,item,k)}else{A[k]=item}return k+1};var C=this;var items=Object(arrayLike);if(arrayLike==null){throw new TypeError(\"Array.from requires an array-like object - not null or undefined\")}var mapFn=arguments.length>1?arguments[1]:void undefined;var T;if(typeof mapFn!==\"undefined\"){if(!isCallable(mapFn)){throw new TypeError(\"Array.from: when provided, the second argument must be a function\")}if(arguments.length>2){T=arguments[2]}}var A=isCallable(C)?Object(new C(len)):new Array(len);var k=0;if(iteratorTypes.indexOf(items.toString())!==-1){var item;while(item=items.next().value)k=iteratee(item,k);A.length=k;return A}var len=toLength(items.length);while(k<len)k=iteratee(items[k],k);A.length=len;return A}}()}if(!Array.prototype.includes){Object.defineProperty(Array.prototype,\"includes\",{value:function value(searchElement,fromIndex){if(this==null){throw new TypeError('\"this\" is null or not defined')}var o=Object(this);var len=o.length>>>0;if(len===0){return false}var n=fromIndex|0;var k=Math.max(n>=0?n:len-Math.abs(n),0);function sameValueZero(x,y){return x===y||typeof x===\"number\"&&typeof y===\"number\"&&isNaN(x)&&isNaN(y)}while(k<len){if(sameValueZero(o[k],searchElement)){return true}k++}return false}})}if(typeof Object.assign!=\"function\"){Object.defineProperty(Object,\"assign\",{value:function assign(target,varArgs){\"use strict\";if(target==null){throw new TypeError(\"Cannot convert undefined or null to object\")}var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey]}}}}return to},writable:true,configurable:true})}var $toString=Object.prototype.toString;var $indexOf=String.prototype.indexOf;var $lastIndexOf=String.prototype.lastIndexOf;function startsWith(search){var string=String(this);if(this==null||$toString.call(search)==\"[object RegExp]\"){throw TypeError()}var stringLength=string.length;var searchString=String(search);var searchLength=searchString.length;var position=arguments.length>1?arguments[1]:undefined;var pos=position?Number(position):0;if(isNaN(pos)){pos=0}var start=Math.min(Math.max(pos,0),stringLength);return $indexOf.call(string,searchString,pos)==start}function endsWith(search){var string=String(this);if(this==null||$toString.call(search)==\"[object RegExp]\"){throw TypeError()}var stringLength=string.length;var searchString=String(search);var searchLength=searchString.length;var pos=stringLength;if(arguments.length>1){var position=arguments[1];if(position!==undefined){pos=position?Number(position):0;if(isNaN(pos)){pos=0}}}var end=Math.min(Math.max(pos,0),stringLength);var start=end-searchLength;if(start<0){return false}return $lastIndexOf.call(string,searchString,start)==start}if(!String.prototype.includes){String.prototype.includes=function(search,start){\"use strict\";if(typeof start!==\"number\"){start=0}if(start+search.length>this.length){return false}else{return this.indexOf(search,start)!==-1}}}(function(){window.WeakSet=b;var c=Date.now()%1e9;function b(a){this.name=\"__st\"+(1e9*Math.random()>>>0)+(c+++\"__\");a&&a.forEach&&a.forEach(this.add,this)}var e=b.prototype;e.add=function(a){var d=this.name;a[d]||Object.defineProperty(a,d,{value:!0,writable:!0});return this};e[\"delete\"]=function(a){if(!a[this.name])return!1;a[this.name]=void 0;return!0};e.has=function(a){return!!a[this.name]}})();";

// Polyfill scripts for iOS < 12.0
static NSString *scripts_before_12_0 = @"\
\"use strict\";if(!Array.prototype.flatMap){Object.defineProperty(Array.prototype,\"flatMap\",{value:function value(callback,thisArg){var self=thisArg||this;if(self===null)throw new TypeError(\"Array.prototype.flatMap called on null or undefined\");if(typeof callback!==\"function\")throw new TypeError(callback+\" is not a function\");var list=[];var o=Object(self);var len=o.length>>>0;for(var k=0;k<len;++k){if(k in o){var part_list=callback.call(self,o[k],k,o);list=list.concat(part_list)}}return list},configurable:true,writable:true})}";

// Polyfill scripts for iOS < 11.1
static NSString *scripts_before_11_1 = @"\
\"use strict\";function _typeof(o){\"@babel/helpers - typeof\";return _typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&\"function\"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?\"symbol\":typeof o},_typeof(o)}if((typeof Symbol===\"undefined\"?\"undefined\":_typeof(Symbol))===undefined||!Symbol.asyncIterator){Symbol.asyncIterator=Symbol[\"for\"](\"Symbol.asyncIterator\")}";

