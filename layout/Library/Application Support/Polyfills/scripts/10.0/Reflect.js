"use strict";function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:true});var supportsSymbol=typeof Symbol==="function";var toPrimitiveSymbol=supportsSymbol&&typeof Symbol.toPrimitive!=="undefined"?Symbol.toPrimitive:fail("Symbol.toPrimitive not found.");var iteratorSymbol=supportsSymbol&&typeof Symbol.iterator!=="undefined"?Symbol.iterator:fail("Symbol.iterator not found.");var functionPrototype=Object.getPrototypeOf(Function);var _Map=typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:fail("A valid Map constructor could not be found.");var _Set=typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:fail("A valid Set constructor could not be found.");var _WeakMap=typeof WeakMap==="function"?WeakMap:fail("A valid WeakMap constructor could not be found.");var registrySymbol=supportsSymbol?Symbol.for("@reflect-metadata:registry"):undefined;var metadataRegistry=GetOrCreateMetadataRegistry();var metadataProvider=CreateMetadataProvider(metadataRegistry);function decorate(decorators,target,propertyKey,attributes){if(!IsUndefined(propertyKey)){if(!IsArray(decorators))throw new TypeError;if(!IsObject(target))throw new TypeError;if(!IsObject(attributes)&&!IsUndefined(attributes)&&!IsNull(attributes))throw new TypeError;if(IsNull(attributes))attributes=undefined;propertyKey=ToPropertyKey(propertyKey);return DecorateProperty(decorators,target,propertyKey,attributes)}else{if(!IsArray(decorators))throw new TypeError;if(!IsConstructor(target))throw new TypeError;return DecorateConstructor(decorators,target)}}exports.decorate=decorate;function metadata(metadataKey,metadataValue){if(typeof Reflect!=="undefined"&&typeof Reflect.metadata==="function"&&Reflect.metadata!==metadata){return Reflect.metadata(metadataKey,metadataValue)}function decorator(target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey)&&!IsPropertyKey(propertyKey))throw new TypeError;OrdinaryDefineOwnMetadata(metadataKey,metadataValue,target,propertyKey)}return decorator}exports.metadata=metadata;function defineMetadata(metadataKey,metadataValue,target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryDefineOwnMetadata(metadataKey,metadataValue,target,propertyKey)}exports.defineMetadata=defineMetadata;function hasMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryHasMetadata(metadataKey,target,propertyKey)}exports.hasMetadata=hasMetadata;function hasOwnMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryHasOwnMetadata(metadataKey,target,propertyKey)}exports.hasOwnMetadata=hasOwnMetadata;function getMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryGetMetadata(metadataKey,target,propertyKey)}exports.getMetadata=getMetadata;function getOwnMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryGetOwnMetadata(metadataKey,target,propertyKey)}exports.getOwnMetadata=getOwnMetadata;function getMetadataKeys(target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryMetadataKeys(target,propertyKey)}exports.getMetadataKeys=getMetadataKeys;function getOwnMetadataKeys(target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryOwnMetadataKeys(target,propertyKey)}exports.getOwnMetadataKeys=getOwnMetadataKeys;function deleteMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);var provider=GetMetadataProvider(target,propertyKey,false);if(IsUndefined(provider))return false;return provider.OrdinaryDeleteMetadata(metadataKey,target,propertyKey)}exports.deleteMetadata=deleteMetadata;function DecorateConstructor(decorators,target){for(var i=decorators.length-1;i>=0;--i){var decorator=decorators[i];var decorated=decorator(target);if(!IsUndefined(decorated)&&!IsNull(decorated)){if(!IsConstructor(decorated))throw new TypeError;target=decorated}}return target}function DecorateProperty(decorators,target,propertyKey,descriptor){for(var i=decorators.length-1;i>=0;--i){var decorator=decorators[i];var decorated=decorator(target,propertyKey,descriptor);if(!IsUndefined(decorated)&&!IsNull(decorated)){if(!IsObject(decorated))throw new TypeError;descriptor=decorated}}return descriptor}function OrdinaryHasMetadata(MetadataKey,O,P){var hasOwn=OrdinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return true;var parent=OrdinaryGetPrototypeOf(O);if(!IsNull(parent))return OrdinaryHasMetadata(MetadataKey,parent,P);return false}function OrdinaryHasOwnMetadata(MetadataKey,O,P){var provider=GetMetadataProvider(O,P,false);if(IsUndefined(provider))return false;return ToBoolean(provider.OrdinaryHasOwnMetadata(MetadataKey,O,P))}function OrdinaryGetMetadata(MetadataKey,O,P){var hasOwn=OrdinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return OrdinaryGetOwnMetadata(MetadataKey,O,P);var parent=OrdinaryGetPrototypeOf(O);if(!IsNull(parent))return OrdinaryGetMetadata(MetadataKey,parent,P);return undefined}function OrdinaryGetOwnMetadata(MetadataKey,O,P){var provider=GetMetadataProvider(O,P,false);if(IsUndefined(provider))return;return provider.OrdinaryGetOwnMetadata(MetadataKey,O,P)}function OrdinaryDefineOwnMetadata(MetadataKey,MetadataValue,O,P){var provider=GetMetadataProvider(O,P,true);provider.OrdinaryDefineOwnMetadata(MetadataKey,MetadataValue,O,P)}function OrdinaryMetadataKeys(O,P){var ownKeys=OrdinaryOwnMetadataKeys(O,P);var parent=OrdinaryGetPrototypeOf(O);if(parent===null)return ownKeys;var parentKeys=OrdinaryMetadataKeys(parent,P);if(parentKeys.length<=0)return ownKeys;if(ownKeys.length<=0)return parentKeys;var set=new _Set;var keys=[];for(var _i=0,ownKeys_1=ownKeys;_i<ownKeys_1.length;_i++){var key=ownKeys_1[_i];var hasKey=set.has(key);if(!hasKey){set.add(key);keys.push(key)}}for(var _a=0,parentKeys_1=parentKeys;_a<parentKeys_1.length;_a++){var key=parentKeys_1[_a];var hasKey=set.has(key);if(!hasKey){set.add(key);keys.push(key)}}return keys}function OrdinaryOwnMetadataKeys(O,P){var provider=GetMetadataProvider(O,P,false);if(!provider){return[]}return provider.OrdinaryOwnMetadataKeys(O,P)}function Type(x){if(x===null)return 1;switch(_typeof(x)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return x===null?1:6;default:return 6}}function IsUndefined(x){return x===undefined}function IsNull(x){return x===null}function IsSymbol(x){return _typeof(x)==="symbol"}function IsObject(x){return _typeof(x)==="object"?x!==null:typeof x==="function"}function ToPrimitive(input,PreferredType){switch(Type(input)){case 0:return input;case 1:return input;case 2:return input;case 3:return input;case 4:return input;case 5:return input}var hint=PreferredType===3?"string":PreferredType===5?"number":"default";var exoticToPrim=GetMethod(input,toPrimitiveSymbol);if(exoticToPrim!==undefined){var result=exoticToPrim.call(input,hint);if(IsObject(result))throw new TypeError;return result}return OrdinaryToPrimitive(input,hint==="default"?"number":hint)}function OrdinaryToPrimitive(O,hint){if(hint==="string"){var toString_1=O.toString;if(IsCallable(toString_1)){var result=toString_1.call(O);if(!IsObject(result))return result}var valueOf=O.valueOf;if(IsCallable(valueOf)){var result=valueOf.call(O);if(!IsObject(result))return result}}else{var valueOf=O.valueOf;if(IsCallable(valueOf)){var result=valueOf.call(O);if(!IsObject(result))return result}var toString_2=O.toString;if(IsCallable(toString_2)){var result=toString_2.call(O);if(!IsObject(result))return result}}throw new TypeError}function ToBoolean(argument){return!!argument}function ToString(argument){return""+argument}function ToPropertyKey(argument){var key=ToPrimitive(argument,3);if(IsSymbol(key))return key;return ToString(key)}function IsArray(argument){return Array.isArray?Array.isArray(argument):argument instanceof Object?argument instanceof Array:Object.prototype.toString.call(argument)==="[object Array]"}function IsCallable(argument){return typeof argument==="function"}function IsConstructor(argument){return typeof argument==="function"}function IsPropertyKey(argument){switch(Type(argument)){case 3:return true;case 4:return true;default:return false}}function GetMethod(V,P){var func=V[P];if(func===undefined||func===null)return undefined;if(!IsCallable(func))throw new TypeError;return func}function GetIterator(obj){var method=GetMethod(obj,iteratorSymbol);if(!IsCallable(method))throw new TypeError;var iterator=method.call(obj);if(!IsObject(iterator))throw new TypeError;return iterator}function IteratorValue(iterResult){return iterResult.value}function IteratorStep(iterator){var result=iterator.next();return result.done?false:result}function IteratorClose(iterator){var f=iterator["return"];if(f)f.call(iterator)}function OrdinaryGetPrototypeOf(O){var proto=Object.getPrototypeOf(O);if(typeof O!=="function"||O===functionPrototype)return proto;if(proto!==functionPrototype)return proto;var prototype=O.prototype;var prototypeProto=prototype&&Object.getPrototypeOf(prototype);if(prototypeProto==null||prototypeProto===Object.prototype)return proto;var constructor=prototypeProto.constructor;if(typeof constructor!=="function")return proto;if(constructor===O)return proto;return constructor}function fail(e){throw e}function CreateMetadataRegistry(){var fallback;if(!IsUndefined(registrySymbol)&&typeof Reflect!=="undefined"&&!(registrySymbol in Reflect)&&typeof Reflect.defineMetadata==="function"){fallback=CreateFallbackProvider(Reflect)}var first;var second;var rest;var targetProviderMap=new _WeakMap;var registry={registerProvider:registerProvider,getProvider:getProvider,setProvider:setProvider};return registry;function registerProvider(provider){if(!Object.isExtensible(registry)){throw new Error("Cannot add provider to a frozen registry.")}switch(true){case fallback===provider:break;case IsUndefined(first):first=provider;break;case first===provider:break;case IsUndefined(second):second=provider;break;case second===provider:break;default:if(rest===undefined)rest=new _Set;rest.add(provider);break}}function getProviderNoCache(O,P){if(!IsUndefined(first)){if(first.isProviderFor(O,P))return first;if(!IsUndefined(second)){if(second.isProviderFor(O,P))return first;if(!IsUndefined(rest)){var iterator=GetIterator(rest);while(true){var next=IteratorStep(iterator);if(!next){return undefined}var provider=IteratorValue(next);if(provider.isProviderFor(O,P)){IteratorClose(iterator);return provider}}}}}if(!IsUndefined(fallback)&&fallback.isProviderFor(O,P)){return fallback}return undefined}function getProvider(O,P){var providerMap=targetProviderMap.get(O);var provider;if(!IsUndefined(providerMap)){provider=providerMap.get(P)}if(!IsUndefined(provider)){return provider}provider=getProviderNoCache(O,P);if(!IsUndefined(provider)){if(IsUndefined(providerMap)){providerMap=new _Map;targetProviderMap.set(O,providerMap)}providerMap.set(P,provider)}return provider}function hasProvider(provider){if(IsUndefined(provider))throw new TypeError;return fallback===provider||first===provider||second===provider||!IsUndefined(rest)&&rest.has(provider)}function setProvider(O,P,provider){if(!hasProvider(provider)){throw new Error("Metadata provider not registered.")}var existingProvider=getProvider(O,P);if(existingProvider!==provider){if(!IsUndefined(existingProvider)){return false}var providerMap=targetProviderMap.get(O);if(IsUndefined(providerMap)){providerMap=new _Map;targetProviderMap.set(O,providerMap)}providerMap.set(P,provider)}return true}}function GetOrCreateMetadataRegistry(){var metadataRegistry;if(!IsUndefined(registrySymbol)&&IsObject(Reflect)&&Object.isExtensible(Reflect)){metadataRegistry=Reflect[registrySymbol]}if(IsUndefined(metadataRegistry)){metadataRegistry=CreateMetadataRegistry()}if(!IsUndefined(registrySymbol)&&IsObject(Reflect)&&Object.isExtensible(Reflect)){Object.defineProperty(Reflect,registrySymbol,{enumerable:false,configurable:false,writable:false,value:metadataRegistry})}return metadataRegistry}function CreateMetadataProvider(registry){var metadata=new _WeakMap;var provider={isProviderFor:function isProviderFor(O,P){var targetMetadata=metadata.get(O);if(IsUndefined(targetMetadata))return false;return targetMetadata.has(P)},OrdinaryDefineOwnMetadata:OrdinaryDefineOwnMetadata,OrdinaryHasOwnMetadata:OrdinaryHasOwnMetadata,OrdinaryGetOwnMetadata:OrdinaryGetOwnMetadata,OrdinaryOwnMetadataKeys:OrdinaryOwnMetadataKeys,OrdinaryDeleteMetadata:OrdinaryDeleteMetadata};metadataRegistry.registerProvider(provider);return provider;function GetOrCreateMetadataMap(O,P,Create){var targetMetadata=metadata.get(O);var createdTargetMetadata=false;if(IsUndefined(targetMetadata)){if(!Create)return undefined;targetMetadata=new _Map;metadata.set(O,targetMetadata);createdTargetMetadata=true}var metadataMap=targetMetadata.get(P);if(IsUndefined(metadataMap)){if(!Create)return undefined;metadataMap=new _Map;targetMetadata.set(P,metadataMap);if(!registry.setProvider(O,P,provider)){targetMetadata.delete(P);if(createdTargetMetadata){metadata.delete(O)}throw new Error("Wrong provider for target.")}}return metadataMap}function OrdinaryHasOwnMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,false);if(IsUndefined(metadataMap))return false;return ToBoolean(metadataMap.has(MetadataKey))}function OrdinaryGetOwnMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,false);if(IsUndefined(metadataMap))return undefined;return metadataMap.get(MetadataKey)}function OrdinaryDefineOwnMetadata(MetadataKey,MetadataValue,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,true);metadataMap.set(MetadataKey,MetadataValue)}function OrdinaryOwnMetadataKeys(O,P){var keys=[];var metadataMap=GetOrCreateMetadataMap(O,P,false);if(IsUndefined(metadataMap))return keys;var keysObj=metadataMap.keys();var iterator=GetIterator(keysObj);var k=0;while(true){var next=IteratorStep(iterator);if(!next){keys.length=k;return keys}var nextValue=IteratorValue(next);try{keys[k]=nextValue}catch(e){try{IteratorClose(iterator)}finally{throw e}}k++}}function OrdinaryDeleteMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,false);if(IsUndefined(metadataMap))return false;if(!metadataMap.delete(MetadataKey))return false;if(metadataMap.size===0){var targetMetadata=metadata.get(O);if(!IsUndefined(targetMetadata)){targetMetadata.delete(P);if(targetMetadata.size===0){metadata.delete(targetMetadata)}}}return true}}function CreateFallbackProvider(reflect){var defineMetadata=reflect.defineMetadata,hasOwnMetadata=reflect.hasOwnMetadata,getOwnMetadata=reflect.getOwnMetadata,getOwnMetadataKeys=reflect.getOwnMetadataKeys,deleteMetadata=reflect.deleteMetadata;var metadataOwner=new _WeakMap;var provider={isProviderFor:function isProviderFor(O,P){var metadataPropertySet=metadataOwner.get(O);if(!IsUndefined(metadataPropertySet)&&metadataPropertySet.has(P)){return true}if(getOwnMetadataKeys(O,P).length){if(IsUndefined(metadataPropertySet)){metadataPropertySet=new _Set;metadataOwner.set(O,metadataPropertySet)}metadataPropertySet.add(P);return true}return false},OrdinaryDefineOwnMetadata:defineMetadata,OrdinaryHasOwnMetadata:hasOwnMetadata,OrdinaryGetOwnMetadata:getOwnMetadata,OrdinaryOwnMetadataKeys:getOwnMetadataKeys,OrdinaryDeleteMetadata:deleteMetadata};return provider}function GetMetadataProvider(O,P,Create){var registeredProvider=metadataRegistry.getProvider(O,P);if(!IsUndefined(registeredProvider)){return registeredProvider}if(Create){if(metadataRegistry.setProvider(O,P,metadataProvider)){return metadataProvider}throw new Error("Illegal state.")}return undefined}