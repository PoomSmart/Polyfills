function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(e=>{"function"==typeof define&&define.amd?define(e):e()})(function(){function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t,r){t=f(t);var n=e,t=a()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r);if(!t||"object"!=_typeof(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if("object"!=_typeof(r=r.call(e,t||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==_typeof(e)?e:e+""))(n.key),n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){var r,n,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return o=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){o=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(o)throw r}}};if(Array.isArray(e)||(a=((e,t)=>{var r;if(e)return"string"==typeof e?l(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0})(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=((e,t)=>{for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e})(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(null,arguments)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}("undefined"!=typeof self?self:global).AbortSignal;var b=(()=>i(function e(){n(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})},[{key:"addEventListener",value:function(e,t,r){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:r})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0,o=r.length;n<o;n++)if(r[n].callback===t)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(e){var t=this;if(e.type in this.listeners){for(var r=this.listeners[e.type].slice(),n=0,o=r.length;n<o;n++){i=void 0;var i=r[n];try{i.callback.call(t,e)}catch(e){Promise.resolve().then(function(){throw e})}i.options&&i.options.once&&t.removeEventListener(e.type,i.callback)}return!e.defaultPrevented}}}]))(),y=(()=>{function a(){var e;return n(this,a),(e=r(this,a)).listeners||b.call(e),Object.defineProperty(e,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(e,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(e,"reason",{value:void 0,writable:!0,configurable:!0}),e}var e=a,t=b;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t),i(a,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){var t,r,n,o,i;"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort)&&this.onabort.call(this,e),t=a,r="dispatchEvent",n=this,i=u(f(1&(o=3)?t.prototype:t),r,n),(2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([e])}},{key:"throwIfAborted",value:function(){var e=this.aborted,t=this.reason;if(e)throw void 0===t?"Aborted":t}}],[{key:"timeout",value:function(e){var t=new p;return setTimeout(function(){return t.abort(new DOMException("This signal is timeout in ".concat(e,"ms"),"TimeoutError"))},e),t.signal}},{key:"any",value:function(r){var n=new p;function o(){n.abort(this.reason);var e,t=c(r);try{for(t.s();!(e=t.n()).done;)e.value.removeEventListener("abort",o)}catch(e){t.e(e)}finally{t.f()}}var e,t=c(r);try{for(t.s();!(e=t.n()).done;){var i=e.value;if(i.aborted){n.abort(i.reason);break}i.addEventListener("abort",o)}}catch(e){t.e(e)}finally{t.f()}return n.signal}}])})(),p=(()=>i(function e(){n(this,e),Object.defineProperty(this,"signal",{value:new y,writable:!0,configurable:!0})},[{key:"abort",value:function(e){var e=(t=>{if(void 0===t)if("undefined"==typeof document)(t=new Error("This operation was aborted")).name="AbortError";else try{t=new DOMException("signal is aborted without reason"),Object.defineProperty(t,"name",{value:"AbortError"})}catch(e){(t=new Error("This operation was aborted")).name="AbortError"}return t})(e),t=(e=>{var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}return t.reason=e,t})(e);this.signal.reason=e,this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]))();function e(e){try{var t=e.AbortController||void 0!==p&&p,r=e.AbortSignal||void 0!==y&&y,n=e.fetch||"undefined"!=typeof fetch&&fetch,o=e.Request||n&&n.Request||"undefined"!=typeof Request&&Request;if(!t||!r)return 1;if(n){if(!o)return 1;try{if(!("signal"in new o("about:blank",{signal:(new t).signal})))return 1}catch(e){return 1}}}catch(e){return 1}}"undefined"!=typeof Symbol&&Symbol.toStringTag&&(p.prototype[Symbol.toStringTag]="AbortController",y.prototype[Symbol.toStringTag]="AbortSignal");var t,d,v,h,g="undefined"!=typeof self?self:global,m=g;try{var w,O=m.AbortSignal||void 0!==y&&y;O&&"function"!=typeof(w=O.prototype||{}).throwIfAborted&&Object.defineProperty(w,"throwIfAborted",{configurable:!0,enumerable:!1,writable:!0,value:function(){if(this&&this.aborted){var t,e=this.reason;if(void 0!==e)throw e;try{t=new DOMException("This operation was aborted","AbortError")}catch(e){(t=new Error("This operation was aborted")).name="AbortError"}throw t}}})}catch(e){}e(g)&&(g.fetch?(O=(m=m="function"==typeof(m=g)?{fetch:m}:m).fetch,h=void 0===(w=m.Request)?O.Request:w,w=m.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,t=(m=e({fetch:O,Request:h,AbortController:m.AbortController,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:void 0!==w&&w})?(!(d=h)||"signal"in(h.prototype||{})||((d=function(e,t){t&&t.signal&&(r=t.signal,delete t.signal);var r,e=new h(e,t);if(r)try{e.signal=r}catch(e){}return e}).prototype=h.prototype),v=O,{fetch:function(e,t){var r,n,o=d&&d.prototype&&d.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(o){try{r=new DOMException("Aborted","AbortError")}catch(e){(r=new Error("Aborted")).name="AbortError"}return o.aborted?Promise.reject(r):(n=new Promise(function(e,t){o.addEventListener("abort",function(){return t(r)},{once:!0})}),t&&t.signal&&delete t.signal,Promise.race([n,v(e,t)]))}return v(e,t)},Request:d}):{fetch:O,Request:h}).Request,g.fetch=m.fetch,g.Request=t,Object.defineProperty(g,"AbortController",{writable:!0,enumerable:!1,configurable:!0,value:p}),Object.defineProperty(g,"AbortSignal",{writable:!0,enumerable:!1,configurable:!0,value:y})):console.warn("fetch() is not available, cannot install abortcontroller-polyfill"))});