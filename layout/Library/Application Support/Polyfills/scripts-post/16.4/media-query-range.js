"use strict";function _regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return _regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),_regeneratorDefine2(u),_regeneratorDefine2(u,o,"Generator"),_regeneratorDefine2(u,n,function(){return this}),_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(_regenerator=function _regenerator(){return{w:i,m:f}})()}function _regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){if(r)i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n;else{var o=function o(r,n){_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})};o("next",0),o("throw",1),o("return",2)}},_regeneratorDefine2(e,r,n,t)}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}(function mediaQueryRangePolyfill(){if(window.__mediaQueryRangePolyfillApplied)return;window.__mediaQueryRangePolyfillApplied=true;var FEATURES=new Set(["width","height","device-width","device-height","aspect-ratio","device-aspect-ratio","resolution"]);var EPSILON_PX=.02;var EPSILON_DPPX=.001;var EPSILON_DPI=.2;function adjustExclusive(value,unit,direction){var num=parseFloat(value);if(!isFinite(num))return value+unit;switch(unit){case"px":return num+direction*EPSILON_PX+unit;case"dppx":return num+direction*EPSILON_DPPX+unit;case"dpi":return num+direction*EPSILON_DPI+unit;default:return num+unit}}function parseValueUnit(str){var m=String(str).trim().match(/^([+-]?(?:\d+\.\d+|\d*\.\d+|\d+))(px|em|rem|vh|vw|vmin|vmax|dppx|dpi|dpcm|pt|pc|cm|mm|in|%)?$/i);if(!m)return null;return{value:m[1],unit:(m[2]||"").toLowerCase()}}function isRatioValue(v){return/^(?:[0-9]*\.?[0-9]+)\/(?:[0-9]*\.?[0-9]+)$/.test(v.trim())}function buildConstraint(feature,type,val){return"(".concat(type,"-").concat(feature,": ").concat(val,")")}function transformSingleComparison(left,op,right,reversed){var feature,value,valueIsLeft;if(FEATURES.has(left)){feature=left;value=right;valueIsLeft=false}else if(FEATURES.has(right)){feature=right;value=left;valueIsLeft=true}else return null;feature=feature.toLowerCase();var isRatio=feature.includes("aspect-ratio");var min=null,max=null;var featureOp,exclusive;if(!valueIsLeft){featureOp=op;exclusive=op==="<"||op===">"}else{if(op==="<")featureOp=">";else if(op==="<=")featureOp=">=";else if(op===">")featureOp="<";else if(op===">=")featureOp="<=";exclusive=op==="<"||op===">"}value=value.trim();if(!isRatio&&!parseValueUnit(value)&&!isRatioValue(value)&&!isCalcValue(value))return null;if(featureOp===">="||featureOp===">"){if(isRatio){min=value}else if(isCalcValue(value)){var adj=featureOp===">"?evaluateAndAdjustCalc(value,+1):value;min=adj}else{var parsed=parseValueUnit(value);if(!parsed)return null;min=featureOp===">"?adjustExclusive(parsed.value,parsed.unit,+1):parsed.value+parsed.unit}}else if(featureOp==="<="||featureOp==="<"){if(isRatio){max=value}else if(isCalcValue(value)){var _adj=featureOp==="<"?evaluateAndAdjustCalc(value,-1):value;max=_adj}else{var _parsed=parseValueUnit(value);if(!_parsed)return null;max=featureOp==="<"?adjustExclusive(_parsed.value,_parsed.unit,-1):_parsed.value+_parsed.unit}}var out=[];if(min)out.push(buildConstraint(feature,"min",min));if(max)out.push(buildConstraint(feature,"max",max));return out.join(" and ")||null}function transformTripleRange(leftVal,op1,feature,op2,rightVal){feature=feature.toLowerCase();if(!FEATURES.has(feature))return null;var isRatio=feature.includes("aspect-ratio");var leftParsed=parseValueUnit(leftVal);var rightParsed=parseValueUnit(rightVal);var leftIsRatio=isRatioValue(leftVal);var rightIsRatio=isRatioValue(rightVal);var leftIsCalc=isCalcValue(leftVal);var rightIsCalc=isCalcValue(rightVal);if(isRatio&&(!leftIsRatio||!rightIsRatio))return null;if(!isRatio&&!(leftParsed||leftIsCalc))return null;if(!isRatio&&!(rightParsed||rightIsCalc))return null;var minVal,maxVal;if(isRatio){minVal=leftVal.trim();maxVal=rightVal.trim()}else if(leftIsCalc||rightIsCalc){if(leftIsCalc){minVal=op1==="<"?evaluateAndAdjustCalc(leftVal,+1):leftVal.trim()}else{minVal=op1==="<"?adjustExclusive(leftParsed.value,leftParsed.unit,+1):leftParsed.value+leftParsed.unit}if(rightIsCalc){maxVal=op2==="<"?evaluateAndAdjustCalc(rightVal,-1):rightVal.trim()}else{maxVal=op2==="<"?adjustExclusive(rightParsed.value,rightParsed.unit,-1):rightParsed.value+rightParsed.unit}}else{minVal=op1==="<"?adjustExclusive(leftParsed.value,leftParsed.unit,+1):leftParsed.value+leftParsed.unit;maxVal=op2==="<"?adjustExclusive(rightParsed.value,rightParsed.unit,-1):rightParsed.value+rightParsed.unit}return"(".concat("min-".concat(feature),": ",minVal,") and (","max-".concat(feature),": ").concat(maxVal,")")}var featureRe="(?:width|height|device-width|device-height|aspect-ratio|device-aspect-ratio|resolution)";var numberUnitRe="(?:[0-9]*\\.?[0-9]+(?:[a-zA-Z%]+)?)";var ratioRe="(?:[0-9]*\\.?[0-9]+/[0-9]*\\.?[0-9]+)";var calcRe="calc\\((?:[^()]+|\\([^()]*\\))*\\)";var valueRe="(?:".concat(numberUnitRe,"|").concat(ratioRe,"|").concat(calcRe,")");var opRe="(?:<=|>=|<|>)";var tripleRangeRegex=new RegExp("^".concat(valueRe,"\\s*").concat(opRe,"\\s*").concat(featureRe,"\\s*").concat(opRe,"\\s*").concat(valueRe,"$"),"i");var singleCompRegex=new RegExp("^(?:".concat(featureRe,"\\s*").concat(opRe,"\\s*").concat(valueRe,"|").concat(valueRe,"\\s*").concat(opRe,"\\s*").concat(featureRe,")$"),"i");function isCalcValue(v){return/^\s*calc\(/i.test(v)}function evaluateCalcExpression(expr){var m=expr.match(/^\s*calc\((.*)\)\s*$/i);if(!m)return null;var src=m[1];var i=0;function peek(){return src[i]}function eat(){return src[i++]}function skip(){while(/\s/.test(peek()))i++}function parseNumberUnit(){skip();var start=i;if(/[+-]/.test(peek()))eat();var saw=false;while(/\d/.test(peek())){eat();saw=true}if(peek()==="."){eat();while(/\d/.test(peek())){eat();saw=true}}if(!saw){i=start;return null}var num=parseFloat(src.slice(start,i));var um=src.slice(i).match(/^(px|dppx|dpi)/i);var unit="";if(um){unit=um[1];i+=unit.length}return{value:num,unit:unit.toLowerCase()}}function parsePrimary(){skip();if(peek()==="("){eat();var v=parseExpr();skip();if(peek()===")")eat();else return null;return v}return parseNumberUnit()}function combine(a,b,op){if(!a||!b)return null;if(op==="+"||op==="-"){if(a.unit!==b.unit)return null;return{value:op==="+"?a.value+b.value:a.value-b.value,unit:a.unit}}if(op==="*"){if(a.unit&&b.unit)return null;if(a.unit)return{value:a.value*b.value,unit:a.unit};if(b.unit)return{value:a.value*b.value,unit:b.unit};return{value:a.value*b.value,unit:""}}if(op==="/"){if(b.unit)return null;return{value:a.value/b.value,unit:a.unit}}return null}function parseFactor(){skip();var sign=1;while(peek()==="+"||peek()==="-"){if(peek()==="-")sign*=-1;eat();skip()}var node=parsePrimary();if(!node)return null;node.value*=sign;return node}function parseTerm(){var n=parseFactor();skip();while(peek()==="*"||peek()==="/"){var op=eat();var r=parseFactor();n=combine(n,r,op);if(!n)return null;skip()}return n}function parseExpr(){var n=parseTerm();skip();while(peek()==="+"||peek()==="-"){var op=eat();var r=parseTerm();n=combine(n,r,op);if(!n)return null;skip()}return n}var out=parseExpr();skip();if(i!==src.length)return null;return out}function evaluateAndAdjustCalc(expr,direction){var res=evaluateCalcExpression(expr);if(!res)return expr;var value=res.value,unit=res.unit;var u=unit.toLowerCase();var v=value;if(u==="px")v+=direction*EPSILON_PX;else if(u==="dppx")v+=direction*EPSILON_DPPX;else if(u==="dpi")v+=direction*EPSILON_DPI;else return expr;return v+unit}function transformConditionPart(part){var trimmed=part.trim();if(!trimmed)return part;var inner=trimmed.replace(/^\((.*)\)$/,"$1").trim();if(tripleRangeRegex.test(inner)){var m=inner.match(new RegExp("^(".concat(valueRe,")\\s*(").concat(opRe,")\\s*(").concat(featureRe,")\\s*(").concat(opRe,")\\s*(").concat(valueRe,")$"),"i"));if(m){var out=transformTripleRange(m[1],m[2],m[3],m[4],m[5]);if(out)return out}}else if(singleCompRegex.test(inner)){var _m=inner.match(new RegExp("^(".concat(featureRe,")\\s*(").concat(opRe,")\\s*(").concat(valueRe,")$"),"i"));if(_m){var _out=transformSingleComparison(_m[1],_m[2],_m[3],false);if(_out)return _out}else{var m2=inner.match(new RegExp("^(".concat(valueRe,")\\s*(").concat(opRe,")\\s*(").concat(featureRe,")$"),"i"));if(m2){var _out2=transformSingleComparison(m2[1],m2[2],m2[3],true);if(_out2)return _out2}}}return part}function splitMediaConditionList(cond){var parts=[];var depth=0,start=0;for(var i=0;i<cond.length;i++){var ch=cond[i];if(ch==="(")depth++;else if(ch===")")depth=Math.max(0,depth-1);else if(ch===","&&depth===0){parts.push(cond.slice(start,i));start=i+1}}parts.push(cond.slice(start));return parts.map(function(s){return s.trim()})}function splitPartsByAnd(condPart){var tokens=[];var depth=0;var buf="";var w=condPart.split(/\s+/);for(var i=0;i<w.length;i++){var token=w[i];var lowered=token.toLowerCase();var _iterator=_createForOfIteratorHelper(token),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var c=_step.value;if(c==="(")depth++;else if(c===")")depth=Math.max(0,depth-1)}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(depth===0&&lowered==="and"){if(buf.trim())tokens.push(buf.trim());buf=""}else{buf+=(buf?" ":"")+token}}if(buf.trim())tokens.push(buf.trim());return tokens}function transformMediaQueryExpression(expr){var prefixMatch=expr.match(/^((?:not|only)\s+)/i);var prefix="";var rest=expr;if(prefixMatch){prefix=prefixMatch[1];rest=expr.slice(prefix.length)}var parts=splitPartsByAnd(rest);var outParts=parts.map(function(p){return transformConditionPart(p)});return prefix+outParts.join(" and ")}function transformMediaQueryList(cond){var list=splitMediaConditionList(cond);var changed=false;var out=list.map(function(part){var transformed=transformMediaQueryExpression(part);if(transformed!==part)changed=true;return transformed});return{changed:changed,text:out.join(", ")}}function transformCSS(cssText){if(!/@media/i.test(cssText))return cssText;return cssText.replace(/@media\s+([^\{]+)\{/gi,function(full,cond){var _transformMediaQueryL=transformMediaQueryList(cond.trim()),changed=_transformMediaQueryL.changed,text=_transformMediaQueryL.text;if(!changed)return full;return"@media ".concat(text,"{")})}function injectStyle(css){if(!css)return;var style=document.createElement("style");style.textContent=css;document.head.appendChild(style)}function getStyleSheetText(sheet){try{var rules=Array.from(sheet.cssRules||sheet.rules||[]);return rules.map(function(r){return r.cssText}).join("\n")}catch(e){return null}}function processStyleSheet(_x){return _processStyleSheet.apply(this,arguments)}function _processStyleSheet(){_processStyleSheet=_asyncToGenerator(_regenerator().m(function _callee(sheet){var text,transformed,url,res,css,_transformed,_t;return _regenerator().w(function(_context){while(1)switch(_context.n){case 0:text=getStyleSheetText(sheet);if(!(text&&/@media\s+[^\{]*[<>]=?/.test(text))){_context.n=1;break}transformed=transformCSS(text);if(transformed!==text){injectStyle(transformed)}return _context.a(2);case 1:if(!sheet.href){_context.n=7;break}_context.p=2;url=new URL(sheet.href,location.href);if(!(url.origin===location.origin)){_context.n=5;break}_context.n=3;return fetch(url.href,{mode:"cors"});case 3:res=_context.v;if(!res.ok){_context.n=5;break}_context.n=4;return res.text();case 4:css=_context.v;if(/@media\s+[^\{]*[<>]=?/.test(css)){_transformed=transformCSS(css);if(_transformed!==css)injectStyle(_transformed)}case 5:_context.n=7;break;case 6:_context.p=6;_t=_context.v;case 7:return _context.a(2)}},_callee,null,[[2,6]])}));return _processStyleSheet.apply(this,arguments)}function processInlineStyleTag(node){if(node.__mediaRangeProcessed)return;var txt=node.textContent;if(txt&&/@media\s+[^\{]*[<>]=?/.test(txt)){var out=transformCSS(txt);if(out!==txt){node.textContent=out}}node.__mediaRangeProcessed=true}function processAll(){return _processAll.apply(this,arguments)}function _processAll(){_processAll=_asyncToGenerator(_regenerator().m(function _callee2(){var sheets,_i,_sheets,sheet;return _regenerator().w(function(_context2){while(1)switch(_context2.n){case 0:sheets=Array.from(document.styleSheets);_i=0,_sheets=sheets;case 1:if(!(_i<_sheets.length)){_context2.n=3;break}sheet=_sheets[_i];_context2.n=2;return processStyleSheet(sheet);case 2:_i++;_context2.n=1;break;case 3:document.querySelectorAll("style").forEach(processInlineStyleTag);case 4:return _context2.a(2)}},_callee2)}));return _processAll.apply(this,arguments)}function setupObserver(){var obs=new MutationObserver(function(muts){var needs=false;var _iterator2=_createForOfIteratorHelper(muts),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var m=_step2.value;if(m.type==="childList"){var _iterator3=_createForOfIteratorHelper(m.addedNodes),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var node=_step3.value;if(node.nodeType!==1)continue;if(node.tagName==="STYLE"){processInlineStyleTag(node)}else if(node.tagName==="LINK"&&node.rel==="stylesheet"){needs=true}else{var inner=node.querySelectorAll&&node.querySelectorAll('style, link[rel="stylesheet"]');if(inner&&inner.length)needs=true}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}else if(m.type==="attributes"){var t=m.target;if(t.tagName==="LINK"&&t.rel==="stylesheet"&&(m.attributeName==="href"||m.attributeName==="rel")){needs=true}}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}if(needs){clearTimeout(window.__mediaRangeDebounce);window.__mediaRangeDebounce=setTimeout(function(){processAll()},80)}});obs.observe(document,{childList:true,subtree:true,attributes:true,attributeFilter:["href","rel"]});return obs}processAll();setupObserver()})();